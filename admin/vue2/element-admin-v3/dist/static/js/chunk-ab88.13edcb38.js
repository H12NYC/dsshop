(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ab88"],{"8k/8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(i("FOmz"));e.default={name:"FreightCreate",components:{Detail:r.default}}},FOmz:function(t,e,i){"use strict";i.r(e);var r=i("Ic2S"),o=i("uUNW");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);i("wJPN");var a=i("KHd+"),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="Detail.vue",e.default=s.exports},Ic2S:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-left":"200px","padding-right":"20px"},attrs:{model:t.ruleForm,rules:t.rules,"label-width":"180px"}},[i("el-form-item",{attrs:{label:t.$t("freight.name"),prop:"name"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"60",clearable:""},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.location"),prop:"location"}},[i("el-cascader",{directives:[{name:"loading",rawName:"v-loading",value:t.pcasLoading,expression:"pcasLoading"}],ref:"cascaderAddr",attrs:{options:t.options,props:{value:"id",label:"name"}},model:{value:t.ruleForm.location,callback:function(e){t.$set(t.ruleForm,"location",e)},expression:"ruleForm.location"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.valuation"),prop:"valuation"}},[i("el-radio-group",{model:{value:t.ruleForm.valuation,callback:function(e){t.$set(t.ruleForm,"valuation",e)},expression:"ruleForm.valuation"}},[i("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("freight.valuation.piece")))]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("freight.valuation.weight")))]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v(t._s(t.$t("freight.valuation.volume")))])],1)],1),t._v(" "),i("el-form-item",{staticClass:"distribution-area",attrs:{label:t.$t("freight.valuation.volume.no_free_delivery_area")}},[i("el-table",{staticStyle:{width:"100%","padding-bottom":"10px"},attrs:{data:t.ruleForm.freight_way,border:""}},[i("el-table-column",{attrs:{label:t.$t("freight.delivery"),width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.location_name.join(",")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("freight.first_piece"),prop:"first_piece",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("freight.first_cost"),prop:"first_cost"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("freight.add_piece"),prop:"add_piece"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("freight.add_cost"),prop:"add_cost"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("common.operation"),width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{content:t.$t("common.redact"),effect:"dark",placement:"top-start"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(i){t.distributionArea(e.row,e.$index)}}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{content:t.$t("common.delete"),effect:"dark",placement:"top-start"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){t.distributionDelete(e.$index)}}})],1)]}}])})],1),t._v(" "),i("div",[t._v(t._s(t.$t("freight.tip")))]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning",round:""},on:{click:function(e){t.distributionArea()}}},[t._v(t._s(t.$t("freight.add_shipping_areas_and_freight")))])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{loading:t.dialogLoading,type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.create():t.edit()}}},[t._v(t._s(t.$t("common.submit")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible,title:t.$t("freight.valuation.volume.no_free_delivery_area")},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticStyle:{"margin-left":"50px"},attrs:{rules:t.distribution_rules,"label-position":"left","label-width":"150px"}},[i("el-form-item",{attrs:{label:t.$t("freight.valuation.volume.distribution_area"),prop:"location"}},t._l(t.provinces,function(e,r){return!e.hide||e.itself?i("el-tag",{key:e.name,staticClass:"distribution-tag",attrs:{effect:e.on?"dark":"plain"},on:{click:function(e){t.setTag(r)}}},[t._v("\n          "+t._s(e.name)+"\n        ")]):t._e()})),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.valuation.distribution_cost")}},[i("el-form",{ref:"dataForm",staticClass:"demo-form-inline",attrs:{model:t.temp,inline:!0,rules:t.distribution_rules}},[i("el-form-item",{attrs:{label:t.$t("freight.first_piece"),prop:"first_piece"}},[i("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11"},model:{value:t.temp.first_piece,callback:function(e){t.$set(t.temp,"first_piece",e)},expression:"temp.first_piece"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.first_cost"),prop:"first_cost"}},[i("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11"},model:{value:t.temp.first_cost,callback:function(e){t.$set(t.temp,"first_cost",e)},expression:"temp.first_cost"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.add_piece"),prop:"add_piece"}},[i("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11"},model:{value:t.temp.add_piece,callback:function(e){t.$set(t.temp,"add_piece",e)},expression:"temp.add_piece"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("freight.add_cost"),prop:"add_cost"}},[i("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11"},model:{value:t.temp.add_cost,callback:function(e){t.$set(t.temp,"add_cost",e)},expression:"temp.add_cost"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),i("el-button",{attrs:{loading:t.formLoading,type:"primary"},on:{click:function(e){t.distributionStatus,t.distributionSubmit()}}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)},o=[];i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o})},J00j:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,r.default)({url:"region",method:"GET",params:t})},e.create=function(t){return t=o.default.parse(t),(0,r.default)({url:"region",method:"POST",data:t})},e.edit=function(t){return t=o.default.parse(t),(0,r.default)({url:"region/"+t.id,method:"POST",data:t})},e.destroy=function(t,e){return e=o.default.parse(e),(0,r.default)({url:"region/destroy/"+t,method:"POST",data:e})};var r=n(i("t3Un")),o=n(i("Qyje"));function n(t){return t&&t.__esModule?t:{default:t}}},"Klo/":function(t,e,i){"use strict";i.r(e);var r=i("8k/8"),o=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);e.default=o.a},MHPm:function(t,e,i){},"OO+v":function(t,e,i){"use strict";i.r(e);var r=i("SJK5"),o=i("Klo/");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);var a=i("KHd+"),s=Object(a.a)(o.default,r.a,r.b,!1,null,null,null);s.options.__file="create.vue",e.default=s.exports},SJK5:function(t,e,i){"use strict";var r=function(){var t=this.$createElement;return(this._self._c||t)("detail",{attrs:{"is-edit":!1}})},o=[];i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o})},ip1f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,r.default)({url:"freight",method:"GET",params:t})},e.create=function(t){return t=o.default.parse(t),(0,r.default)({url:"freight",method:"POST",data:t})},e.edit=function(t){return t=o.default.parse(t),(0,r.default)({url:"freight/"+t.id,method:"POST",data:t})},e.destroy=function(t){return(0,r.default)({url:"freight/destroy/"+t,method:"POST"})},e.detail=function(t){return(0,r.default)({url:"freight/"+t,method:"GET"})};var r=n(i("t3Un")),o=n(i("Qyje"));function n(t){return t&&t.__esModule?t:{default:t}}},lO8l:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(i("P2sY")),o=i("ip1f"),n=i("J00j");e.default={name:"FreightDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{formLoading:!1,dialogLoading:!1,distributionIndex:0,distributionIndexOn:0,copy:!1,distributionStatus:"create",dialogFormVisible:!1,effect:"plain",options:[],provinces:[],selectedOptions:[],dialogVisible:!1,loading:!1,pcasLoading:!1,id:"",temp:{location:[],location_name:[],first_piece:"",first_cost:"",add_piece:"",add_cost:""},ruleForm:{location:[],name:"",valuation:0,freight_way:[],pinkage:[]},imgProgress:!1,imgData:{type:1,size:2097152},dialogStatus:"create",imgProgressPercent:0,rules:{name:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.name")}),trigger:"blur"}],location:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.location")}),trigger:"change"}],valuation:[{required:!0,message:this.$t("hint.error.select",{attribute:this.$t("freight.valuation")}),trigger:"change"}]},distribution_rules:{location:[{required:!0,message:this.$t("hint.error.select",{attribute:this.$t("freight.valuation.volume.distribution_area")}),trigger:"blur"}],first_piece:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.first_piece")}),trigger:"blur"}],first_cost:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.first_cost")}),trigger:"blur"}],add_piece:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.add_piece")}),trigger:"blur"}],add_cost:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("freight.add_cost")}),trigger:"blur"}]}}},created:function(){this.isEdit&&(this.id=this.$route.query.id),this.$route.query.copy&&(this.copy=this.$route.query.copy,this.id=this.$route.query.id),this.getPcas(),this.getList()},methods:{getPcas:function(){var t=this;this.pcasLoading=!0,(0,n.getList)({parent_id:0,all:!0}).then(function(e){e.data.length&&(t.options=e.data[0].children,t.getProvinces(e.data[0]))})},getProvinces:function(t){var e=this;(0,n.getList)({parent_id:t.id}).then(function(t){e.provinces=t.data,e.pcasLoading=!1})},getList:function(){var t=this;this.loading=!0,this.initProvinces(),this.id>0?(0,o.detail)(this.id).then(function(e){t.ruleForm=e.data,t.copy?t.ruleForm.name=t.ruleForm.name+"副本":t.dialogStatus="update";var i=function(e){t.ruleForm.freight_way.forEach(function(i){i.location.forEach(function(i){t.provinces[e].value===i&&(t.provinces[e].hide=!0,t.provinces[e].on=!0)})})};for(var r in t.provinces)i(r);t.distributionIndexOn=t.ruleForm.freight_way.length,t.distributionIndex=t.ruleForm.freight_way.length+1,t.loading=!1}):this.loading=!1},initProvinces:function(){for(var t in this.provinces)this.provinces[t].hide=!1,this.provinces[t].on=!1,this.provinces[t].itself=!1},setTag:function(t){var e=this.provinces;e[t].on&&e[t].hide&&(e[t].hide=!1),e[t].on=!e[t].on,this.provinces=(0,r.default)([],e)},distributionArea:function(t,e){if(this.initTemp(),this.distributionStatus="create",t){for(var i in this.distributionStatus="update",this.distributionIndexOn=e,this.provinces)-1!==t.location.indexOf(this.provinces[i].id)&&(this.provinces[i].itself=!0,this.provinces[i].on=!0);this.temp=(0,r.default)({},t)}else this.temp.location=[],this.temp.location_name=[],this.distributionIndexOn=this.distributionIndex,this.distributionIndex=this.distributionIndex+1;this.dialogFormVisible=!0},distributionDelete:function(t){var e=this.ruleForm.freight_way[t].location;for(var i in this.provinces)for(var r in e)this.provinces[i].value===e[r]&&(this.provinces[i].on=!1,this.provinces[i].hide=!1,this.provinces[i].itself=!1);this.ruleForm.freight_way.splice(t,1)},distributionSubmit:function(){var t=this;this.formLoading=!0,this.$refs.dataForm.validate(function(e){if(e){var i=[],r=[];for(var o in t.provinces)t.provinces[o].on&&(t.provinces[o].hide=!0,t.$set(t.provinces,o,t.provinces[o]),i.push(t.provinces[o].id),r.push(t.provinces[o].name));t.temp.location=i,t.temp.location_name=r,t.$set(t.ruleForm.freight_way,t.distributionIndexOn,t.temp),t.dialogFormVisible=!1,t.formLoading=!1,t.initTemp()}else t.formLoading=!1})},initTemp:function(){for(var t in this.provinces)this.provinces[t].on=!1,this.provinces[t].itself=!1;this.temp={location:[],location_name:[],first_piece:"",first_cost:"",add_piece:"",add_cost:""}},create:function(){var t=this;this.dialogLoading=!0,this.$refs.ruleForm.validate(function(e){if(e){for(var i in t.ruleForm.pinkage=[],t.provinces)t.provinces[i].hide||t.ruleForm.pinkage.push(t.provinces[i].id);(0,o.create)(t.ruleForm).then(function(){t.dialogFormVisible=!1,t.dialogLoading=!1,t.$notify({title:t.$t("common.succeed"),message:t.$t("hint.succeed.win",{attribute:t.$t("common.add")}),type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)}).catch(function(){t.dialogLoading=!1})}else t.dialogLoading=!1})},edit:function(){var t=this;this.dialogLoading=!0,this.$refs.ruleForm.validate(function(e){if(e){for(var i in t.ruleForm.pinkage=[],t.provinces)t.provinces[i].hide||t.ruleForm.pinkage.push(t.provinces[i].id);(0,o.edit)(t.ruleForm).then(function(){t.dialogFormVisible=!1,t.dialogLoading=!1,t.$notify({title:t.$t("common.succeed"),message:t.$t("hint.succeed.win",{attribute:t.$t("common.update")}),type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)}).catch(function(){t.dialogLoading=!1})}else t.dialogLoading=!1})}}}},uUNW:function(t,e,i){"use strict";i.r(e);var r=i("lO8l"),o=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,function(){return r[t]})}(n);e.default=o.a},wJPN:function(t,e,i){"use strict";var r=i("MHPm");i.n(r).a}}]);