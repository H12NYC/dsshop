(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-26fa"],{"+gJB":function(e,t,l){"use strict";var a=l("CoF6");l.n(a).a},"2A0X":function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[l("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[l("h3",[e._v("基本信息")]),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"插件名称",prop:"name"}},[l("el-input",{attrs:{maxlength:"20",placeholder:"请输入插件名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"插件标识",prop:"abbreviation"}},[l("el-input",{attrs:{maxlength:"20",placeholder:"请输入插件标识",clearable:""},model:{value:e.ruleForm.abbreviation,callback:function(t){e.$set(e.ruleForm,"abbreviation",t)},expression:"ruleForm.abbreviation"}})],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"作者",prop:"author"}},[l("el-input",{attrs:{maxlength:"20",placeholder:"请输入作者",clearable:""},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"插件简介",prop:"describe"}},[l("el-input",{attrs:{maxlength:"200",placeholder:"请输入插件简介",clearable:""},model:{value:e.ruleForm.describe,callback:function(t){e.$set(e.ruleForm,"describe",t)},expression:"ruleForm.describe"}})],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"支持的客户端模板",prop:"client"}},[l("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.clientTemplate,callback:function(t){e.$set(e.ruleForm,"clientTemplate",t)},expression:"ruleForm.clientTemplate"}},e._l(e.template,function(t){return l("el-option-group",{key:t.name,attrs:{label:t.name}},e._l(t.children,function(e){return l("el-option",{key:e.en,attrs:{label:e.name,value:t.name+"/"+e.en}})}))}))],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"支持的后台模板",prop:"client"}},[l("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.adminTemplate,callback:function(t){e.$set(e.ruleForm,"adminTemplate",t)},expression:"ruleForm.adminTemplate"}},e._l(e.adminTemplate,function(t){return l("el-option-group",{key:t.name,attrs:{label:t.name}},e._l(t.children,function(e){return l("el-option",{key:e.en,attrs:{label:e.name,value:t.name+"/"+e.en}})}))}))],1),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、创建数据库时，会根据支持的客户端自动创建相关的模板")])]),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"使用说明",prop:"instructions"}},[l("mavon-editor",{class:{"full-screen":e.fullScreen},staticStyle:{"min-width":"1000px"},attrs:{xss_options:e.xssOptions,toolbars:e.markdownOption,ishljs:!0,"code-style":"atom-one-dark",placeholder:"请输入正文"},on:{fullScreen:e.fullScreen},model:{value:e.ruleForm.instructions,callback:function(t){e.$set(e.ruleForm,"instructions",t)},expression:"ruleForm.instructions"}})],1),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、使用说明支持markdown语法")])]),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"插件版本",prop:"versions"}},[l("el-input",{attrs:{maxlength:"20",placeholder:"请输入插件版本",clearable:""},model:{value:e.ruleForm.versions,callback:function(t){e.$set(e.ruleForm,"versions",t)},expression:"ruleForm.versions"}})],1),e._v(" "),l("h3",[e._v("数据库")]),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、创建的表可以是伪数据表，即不创建数据表，只需要创建一些模板和后端代码")]),e._v(" "),l("p",[e._v("2、删除插件时，将会删除自动生成的文件，其它非自动生成的文件不会进行删除")]),e._v(" "),l("p",[e._v("3、创建的插件不会自动生成数据表，需要通过命令行执行`php artisan migrate`，打包好后，其它用户使用时，会自动生成对应的数据表，无需执行命名行")]),e._v(" "),l("p",[e._v("4、自己添加的路由请带上name属性，name命名格式：admin/client.权限名，如`admin.adminList`")])]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.db}},[l("el-table-column",{attrs:{prop:"name",label:"表名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"annotation",label:"表注释",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.annotation)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"softDeletes",label:"软删除",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.softDeletes?"支持":"不支持")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"timestamps",label:"timestamps",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.timestamps?"支持":"不支持")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"数据表",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:t.row.data_table,callback:function(l){e.$set(t.row,"data_table",l)},expression:"scope.row.data_table"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"后端代码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:t.row.after_end,callback:function(l){e.$set(t.row,"after_end",l)},expression:"scope.row.after_end"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"后台代码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:t.row.backstage,callback:function(l){e.$set(t.row,"backstage",l)},expression:"scope.row.backstage"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"客户端代码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:t.row.client,callback:function(l){e.$set(t.row,"client",l)},expression:"scope.row.client"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"权限",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:t.row.jurisdiction,callback:function(l){e.$set(t.row,"jurisdiction",l)},expression:"scope.row.jurisdiction"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"是否重置",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.row.reset,callback:function(l){e.$set(t.row,"reset",l)},expression:"scope.row.reset"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.redact"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){e.editDataTable(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteDataTable(t.$index)}}})],1)]}}])})],1),e._v(" "),l("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"success",round:""},on:{click:e.addDataTable}},[e._v("新建数据表")]),e._v(" "),l("h3",[e._v("观察者")]),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、如果你的插件涉及到其它插件或需要在某个业务执行前后去做处理，那请用观察者，而不是直接去修改业务代码")])]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.observer}},[l("el-table-column",{attrs:{prop:"name",label:"观察者名称",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"models",label:"依赖模型",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.models)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"path",label:"可执行路由",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.path)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"explain",label:"说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.explain)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"reset",label:"是否重置",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.row.reset,callback:function(l){e.$set(t.row,"reset",l)},expression:"scope.row.reset"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.redact"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){e.editObserverTable(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteObserverTable(t.$index)}}})],1)]}}])})],1),e._v(" "),l("el-button",{staticStyle:{margin:"10px 0 0 0"},attrs:{type:"success",round:""},on:{click:e.addObserverTable}},[e._v("新建观察者")]),e._v(" "),l("h3",[e._v("依赖插件")]),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、如果您的插件需要依赖其它插件才可以运作，或是有根据其它插件开发对应的功能，可通过添加依赖插件实现")])]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.relyOn}},[l("el-table-column",{attrs:{prop:"file",label:"依赖的插件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"explain",label:"是否必须"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.must?"是":"否")+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.redact"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){e.editRelyOnTable(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteRelyOnTable(t.$index)}}})],1)]}}])})],1),e._v(" "),l("el-button",{staticStyle:{margin:"10px 0 20px 0"},attrs:{type:"success",round:""},on:{click:e.addRelyOnTable}},[e._v("添加依赖插件")]),e._v(" "),l("h3",[e._v("关联文件")]),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、关联文件不能存在相同的文件名或目录名，如客户端和移动端相同，请自行修改")])]),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ruleForm.relevance}},[l("el-table-column",{attrs:{prop:"file",label:"文件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.file)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"explain",label:"说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.explain)+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.redact"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){e.editRelevanceTable(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteRelevanceTable(t.$index)}}})],1)]}}])})],1),e._v(" "),l("el-button",{staticStyle:{margin:"10px 0 20px 0"},attrs:{type:"success",round:""},on:{click:e.addRelevanceTable}},[e._v("添加关联文件")]),e._v(" "),e.name?l("el-form-item",{attrs:{label:"是否重置路由",prop:"routes"}},[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.ruleForm.routes,callback:function(t){e.$set(e.ruleForm,"routes",t)},expression:"ruleForm.routes"}}),e._v(" "),l("p",[e._v("重置后将会重新生成后台路由代码、后端路由代码、语言包路由代码")])],1):e._e(),e._v(" "),e.name?l("el-form-item",{attrs:{label:"打包权限",prop:"packagingJurisdiction"}},[l("tree-transfer",{staticStyle:{width:"800px"},attrs:{from_data:e.fromData,to_data:e.toData,"default-props":{label:"label"},title:["未分配","已分配"],mode:"transfer",placeholder:"请输入关键词进行筛选",height:"500px",filter:"","open-all":""},on:{addBtn:e.add,removeBtn:e.remove}}),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、如果有设计到后台权限，请配置此处，不然则无需配置")]),e._v(" "),l("p",[e._v("2、插件权限在卸载的时候，不会对一级权限进行删除，如需要删除，请通过权限管理自行手动删除")]),e._v(" "),l("p",[e._v("3、配置打包插件所需要的权限，配置后的权限在用户安装插件时会根据该权限进行添加")]),e._v(" "),l("p",[e._v("4、打包权限为最终插件所需权限，请确保配置正常，不然将导致用户安装插件后无法正常使用插件")])])],1):e._e(),e._v(" "),l("el-form-item",{staticClass:"float-button"},[l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("common.submit")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogDataTable,fullscreen:!0,title:e.dbEdit?"编辑数据表":"新建数据表"},on:{"update:visible":function(t){e.dialogDataTable=t}}},[l("el-form",{ref:"dataTableForm",staticClass:"dataTableForm",attrs:{model:e.temp,rules:e.dataTableRules,"label-position":"top","label-width":"120px"}},[l("el-form-item",{staticClass:"min-input",attrs:{label:"表名",prop:"name"}},[l("el-input",{attrs:{placeholder:"请输入表名",maxlength:"60",clearable:""},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}}),e._v(" "),l("p",[e._v("表名在没有特殊情况下，请在表最后加上s")])],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"表注释",prop:"annotation"}},[l("el-input",{attrs:{placeholder:"请输入表注释",maxlength:"60",clearable:""},model:{value:e.temp.annotation,callback:function(t){e.$set(e.temp,"annotation",t)},expression:"temp.annotation"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"属性",prop:"attribute"}},[l("el-table",{staticClass:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.temp.attribute,"row-key":"id"}},[l("el-table-column",{attrs:{prop:"name","row-key":"id",label:"名字",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{rules:{required:!0,message:"属性名字不能为空",trigger:"blur"},prop:"attribute."+t.$index+".name"}},[l("el-input",{attrs:{clearable:""},model:{value:t.row.name,callback:function(l){e.$set(t.row,"name",l)},expression:"scope.row.name"}})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{rules:{required:!0,message:"请选择类型",trigger:"change"},prop:"attribute."+t.$index+".type"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.row.type,callback:function(l){e.$set(t.row,"type",l)},expression:"scope.row.type"}},e._l(e.db.type,function(t){return l("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"length",label:"长度/值",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{prop:"attribute."+t.$index+".length"}},[l("el-input",{attrs:{clearable:""},model:{value:t.row.length,callback:function(l){e.$set(t.row,"length",l)},expression:"scope.row.length"}})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"default",label:"默认值",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{attrs:{model:t.row}},[l("el-form-item",{attrs:{prop:"default"}},[l("el-input",{attrs:{clearable:""},model:{value:t.row.default,callback:function(l){e.$set(t.row,"default",l)},expression:"scope.row.default"}})],1)],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"attribute",label:"属性",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",[l("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.row.attribute,callback:function(l){e.$set(t.row,"attribute",l)},expression:"scope.row.attribute"}},e._l(e.db.attribute,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"is_empty",label:"空",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{prop:"is_empty"}},[l("el-checkbox",{model:{value:t.row.is_empty,callback:function(l){e.$set(t.row,"is_empty",l)},expression:"scope.row.is_empty"}})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"AUTO_INCREMENT",label:"A_I",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{prop:"AUTO_INCREMENT"}},[l("el-checkbox",{model:{value:t.row.AUTO_INCREMENT,callback:function(l){e.$set(t.row,"AUTO_INCREMENT",l)},expression:"scope.row.AUTO_INCREMENT"}})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"annotation",label:"注释"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form-item",{attrs:{prop:"annotation"}},[l("el-input",{attrs:{clearable:""},model:{value:t.row.annotation,callback:function(l){e.$set(t.row,"annotation",l)},expression:"scope.row.annotation"}})],1)]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"50",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteDBAttribute(t.$index)}}})],1)]}}])})],1),e._v(" "),l("div",{staticClass:"tip"},[l("p",[e._v("1、表注释如果有参数说明的话，请以下面的格式进行编写[说明:值=值含义-英文简写]，如[是否隐藏:0=否-no,1=是-yes]")]),e._v(" "),l("p",[e._v("2、表注释的英文简写如果包含多个英文单词的话，请用下划线连接，如full_reduction")]),e._v(" "),l("p",[e._v("3、名字如果是ID的话，将自动设置主键自增类型")]),e._v(" "),l("p",[e._v("4、支持拖拽排序")]),e._v(" "),l("p",[e._v("5、如果字段非必填，请设为空")]),e._v(" "),l("p",[e._v("6、后台代码：控制器、验证器；数据库代码：数据库迁移文件、模型；客户端代码：client;权限代码：权限分配")])]),e._v(" "),l("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success",round:""},on:{click:e.addDBAttribute}},[e._v("增加属性")])],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"软删除",prop:"softDeletes"}},[l("el-radio-group",{model:{value:e.temp.softDeletes,callback:function(t){e.$set(e.temp,"softDeletes",t)},expression:"temp.softDeletes"}},[l("el-radio",{attrs:{label:1}},[e._v("支持")]),e._v(" "),l("el-radio",{attrs:{label:0}},[e._v("不支持")])],1)],1),e._v(" "),l("el-form-item",{staticClass:"min-input",attrs:{label:"timestamps",prop:"timestamps"}},[l("el-radio-group",{model:{value:e.temp.timestamps,callback:function(t){e.$set(e.temp,"timestamps",t)},expression:"temp.timestamps"}},[l("el-radio",{attrs:{label:1}},[e._v("支持")]),e._v(" "),l("el-radio",{attrs:{label:0}},[e._v("不支持")])],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"索引",prop:"indexes"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.temp.indexes}},[l("el-table-column",{attrs:{prop:"name",label:"键名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name)+"\n            ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"type",label:"索引类型",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.type)+"\n            ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"field",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.field)+"\n            ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:e.$t("common.operation"),width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.redact"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){e.editIndexes(t.row)}}})],1),e._v(" "),l("el-tooltip",{staticClass:"item",attrs:{content:e.$t("common.delete"),effect:"dark",placement:"top-start"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(l){e.deleteIndexes(t.$index)}}})],1)]}}])})],1),e._v(" "),l("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success",round:""},on:{click:e.addDBIndexes}},[e._v("增加索引")])],1),e._v(" "),l("el-form-item",{attrs:{label:"数据表",prop:"data_table"}},[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:e.temp.data_table,callback:function(t){e.$set(e.temp,"data_table",t)},expression:"temp.data_table"}}),e._v(" "),l("div",[e._v("选择生成后，系统将自动生成数据表迁移文件")])],1),e._v(" "),l("el-form-item",{attrs:{label:"后端代码",prop:"after_end"}},[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:e.temp.after_end,callback:function(t){e.$set(e.temp,"after_end",t)},expression:"temp.after_end"}}),e._v(" "),l("div",[e._v("选择生成后，系统将自动生成控制器、模型、验证器")])],1),e._v(" "),l("el-form-item",{attrs:{label:"后台代码",prop:"backstage"}},[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:e.temp.backstage,callback:function(t){e.$set(e.temp,"backstage",t)},expression:"temp.backstage"}}),e._v(" "),l("div",[e._v("选择生成后，系统将自动生成后台模板文件")])],1),e._v(" "),l("el-form-item",{attrs:{label:"客户端代码",prop:"client"}},[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:e.temp.client,callback:function(t){e.$set(e.temp,"client",t)},expression:"temp.client"}}),e._v(" "),l("p",[e._v("选择生成后，系统将自动生支持的客户端代码;客户端不会自动生成路由文件，所以需要自行添加对应路由;")]),e._v(" "),l("p",[e._v("发行时，系统会自动将pages目录下以插件标识命名的目录、user目录下以插件标识命名的目录、api目录下以表命名的文件进行打包")])],1),e._v(" "),l("el-form-item",{attrs:{label:"权限",prop:"jurisdiction"}},[l("el-switch",{attrs:{"active-text":"生成","inactive-text":"不生成"},model:{value:e.temp.jurisdiction,callback:function(t){e.$set(e.temp,"jurisdiction",t)},expression:"temp.jurisdiction"}}),e._v(" "),l("div",[e._v("选择生成后，系统将自动创建数据表对应的权限，并为当前用户增加该权限")])],1),e._v(" "),e.name?l("el-form-item",{attrs:{label:"是否重置",prop:"reset"}},[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.temp.reset,callback:function(t){e.$set(e.temp,"reset",t)},expression:"temp.reset"}}),e._v(" "),l("p",[e._v("1、勾选重置将重新生成所有插件相关文件，如已对部分文件做了修改，请不要勾选")]),e._v(" "),l("p",[e._v("2、不重置的话，保存后会不将修改后的数据更新到对应的文件中，需要自行在对应文件中手动添加")])],1):e._e()],1),e._v(" "),l("div",{staticClass:"float-button",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{loading:e.formLoading},on:{click:function(t){e.dialogDataTable=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.dataTableSubmit}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogIndexes,title:""===e.dialogIndexesIndex?"新建索引":"修改索引"},on:{"update:visible":function(t){e.dialogIndexes=t}}},[l("el-form",{ref:"indexesForm",attrs:{model:e.indexesTemp,rules:e.indexesRules,"label-position":"left","label-width":"120px"}},[l("el-form-item",{attrs:{label:"索引名称",prop:"name"}},[l("el-input",{staticClass:"min-input",attrs:{placeholder:"请输入索引名称",maxlength:"60",clearable:""},model:{value:e.indexesTemp.name,callback:function(t){e.$set(e.indexesTemp,"name",t)},expression:"indexesTemp.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"索引类型",prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.indexesTemp.type,callback:function(t){e.$set(e.indexesTemp,"type",t)},expression:"indexesTemp.type"}},e._l(e.indexesType,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"字段",prop:"field"}},[l("el-select",{attrs:{multiple:"",placeholder:"请选择",clearable:""},model:{value:e.indexesTemp.field,callback:function(t){e.$set(e.indexesTemp,"field",t)},expression:"indexesTemp.field"}},e._l(e.temp.attribute,function(e){return l("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{loading:e.formLoading},on:{click:function(t){e.dialogIndexes=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.indexesSubmit}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogObserver,title:""===e.dialogObserverIndex?"新建观察者":"修改观察者"},on:{"update:visible":function(t){e.dialogObserver=t}}},[l("el-form",{ref:"observerForm",attrs:{model:e.observerTemp,rules:e.observerRules,"label-position":"left","label-width":"120px"}},[l("el-form-item",{attrs:{label:"观察者名称",prop:"name"}},[l("el-input",{staticClass:"min-input",attrs:{placeholder:"请输入观察者名称",maxlength:"60",clearable:""},model:{value:e.observerTemp.name,callback:function(t){e.$set(e.observerTemp,"name",t)},expression:"observerTemp.name"}}),e._v(" "),l("div",[e._v("观察者名称仅支持英文和空格，最终会解析成类名")])],1),e._v(" "),l("el-form-item",{attrs:{label:"依赖模型",prop:"models"}},[l("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.observerTemp.models,callback:function(t){e.$set(e.observerTemp,"models",t)},expression:"observerTemp.models"}},e._l(e.models,function(e,t){return l("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"可执行路由",prop:"path"}},[l("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:"",multiple:""},model:{value:e.observerTemp.path,callback:function(t){e.$set(e.observerTemp,"path",t)},expression:"observerTemp.path"}},e._l(e.path,function(t,a){return l("el-option",{key:a,attrs:{label:t.uri,value:t.uri}},[l("span",{staticStyle:{float:"left"}},[e._v(e._s(t.uri))]),e._v(" "),l("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.explain)+"["+e._s(t.path)+"]")])])})),e._v(" "),l("div",[e._v("为空即不允许路由执行")])],1),e._v(" "),l("el-form-item",{attrs:{label:"说明",prop:"explain"}},[l("el-input",{staticClass:"min-input",attrs:{placeholder:"请输入说明",type:"textarea",maxlength:"200",clearable:""},model:{value:e.observerTemp.explain,callback:function(t){e.$set(e.observerTemp,"explain",t)},expression:"observerTemp.explain"}}),e._v(" "),l("div",[e._v("说明下该观察者的作用")])],1),e._v(" "),e.name?l("el-form-item",{attrs:{label:"是否重置",prop:"reset"}},[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.observerTemp.reset,callback:function(t){e.$set(e.observerTemp,"reset",t)},expression:"observerTemp.reset"}}),e._v(" "),l("p",[e._v("1、勾选重置将重新生成所有插件相关文件，如已对部分文件做了修改，请不要勾选")]),e._v(" "),l("p",[e._v("2、不重置的话，保存后会不将修改后的数据更新到对应的文件中，需要自行在对应文件中手动添加")])],1):e._e()],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{loading:e.formLoading},on:{click:function(t){e.dialogObserver=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.observerSubmit}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogRelevance,title:""===e.dialogRelevanceIndex?"新建关联文件":"修改关联文件"},on:{"update:visible":function(t){e.dialogRelevance=t}}},[l("el-form",{ref:"relevanceForm",attrs:{model:e.relevanceTemp,rules:e.relevanceRules,"label-position":"left","label-width":"120px"}},[l("el-form-item",{attrs:{label:"文件",prop:"file"}},[l("el-input",{staticClass:"min-input",attrs:{placeholder:"请输入文件完整路径",maxlength:"255",clearable:""},model:{value:e.relevanceTemp.file,callback:function(t){e.$set(e.relevanceTemp,"file",t)},expression:"relevanceTemp.file"}}),e._v(" "),l("div",[e._v("在发行时会对文件进行校验，如不存在将无法完成发行，格式：/api/app/Providers/AppServiceProvider.php")])],1),e._v(" "),l("el-form-item",{attrs:{label:"说明",prop:"explain"}},[l("el-input",{staticClass:"min-input",attrs:{placeholder:"请输入说明",type:"textarea",maxlength:"200",clearable:""},model:{value:e.relevanceTemp.explain,callback:function(t){e.$set(e.relevanceTemp,"explain",t)},expression:"relevanceTemp.explain"}}),e._v(" "),l("div",[e._v("说明下该文件的作用")])],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{loading:e.formLoading},on:{click:function(t){e.dialogRelevance=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.relevanceSubmit}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),l("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogRelyOn,title:""===e.dialogRelyOnIndex?"新建依赖插件":"修改依赖插件"},on:{"update:visible":function(t){e.dialogRelyOn=t}}},[l("el-form",{ref:"relyOnForm",attrs:{model:e.relyOnTemp,rules:e.relyOnRules,"label-position":"left","label-width":"120px"}},[l("el-form-item",{staticClass:"min-input",attrs:{label:"插件",prop:"name"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.relyOnTemp.name,callback:function(t){e.$set(e.relyOnTemp,"name",t)},expression:"relyOnTemp.name"}},e._l(e.relyOn,function(e,t){return l("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"是否必须",prop:"must"}},[l("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.relyOnTemp.must,callback:function(t){e.$set(e.relyOnTemp,"must",t)},expression:"relyOnTemp.must"}}),e._v(" "),l("p",[e._v("1、设为必须后，使用者必须先安装依赖插件才允许继续操作")])],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{loading:e.formLoading},on:{click:function(t){e.dialogRelyOn=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.relyOnSubmit}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)},n=[];l.d(t,"a",function(){return a}),l.d(t,"b",function(){return n})},"5R5Q":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l("FcpP"));t.default=a.default},CoF6:function(e,t,l){},FcpP:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(l("gDS+")),n=l("lEg2"),r=s(l("U/5H")),i=l("stgD");l("ZOF2");var o=s(l("THBk"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:"PluginDetail",components:{mavonEditor:i.mavonEditor,treeTransfer:o.default},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{path:[],models:[],template:[],relyOn:[],adminTemplate:[],dialogObserver:!1,dialogRelevance:!1,dialogRelyOn:!1,dbEdit:!1,observerEdit:!1,name:"",dialogIndexes:!1,dialogIndexesIndex:"",dialogRelevanceIndex:"",dialogRelyOnIndex:"",dialogDataTableIndex:"",dialogObserverIndex:"",dialogDataTable:!1,loading:!1,formLoading:!1,indexesTemp:{name:"",type:"",synopsis:"",field:[]},observerTemp:{name:"",models:"",path:"",explain:"",reset:!1},relevanceTemp:{file:"",explain:""},relyOnTemp:{name:"",abbreviation:"",versions:"",must:!1},versions:"",ruleForm:{clientTemplate:[],adminTemplate:[],name:"",abbreviation:"",old_abbreviation:"",instructions:"",author:"",db:[],observer:[],describe:"",versions:"",relevance:[],packagingJurisdiction:[],routes:!1,relyOn:[]},rules:{name:[{required:!0,message:"请输入插件名称",trigger:"blur"}],abbreviation:[{required:!0,message:"请输入插件标识",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"}],describe:[{required:!0,message:"请输入插件简介",trigger:"blur"}],versions:[{required:!0,message:"请输入插件版本",trigger:"blur"}]},dataTableRules:{name:[{required:!0,message:"请输入表名",trigger:"blur"}],annotation:[{required:!0,message:"请输入表注释",trigger:"blur"}]},indexesRules:{name:[{required:!0,message:"请输入表名",trigger:"blur"}],type:[{required:!0,message:"请选择索引类型",trigger:"change"}],field:[{required:!0,message:"请选择字段",trigger:"change"}]},observerRules:{name:[{required:!0,message:"请输入观察者名称",trigger:"blur"},{validator:function(e,t,l){/^(?!_)([A-Za-z ]+)$/.test(t)?l():l(new Error("观察者名称格式有误"))},trigger:"blur"}],models:[{required:!0,message:"请选择依赖模型",trigger:"change"}],path:[{required:!1,message:"请选择可执行路由",trigger:"change"}],explain:[{required:!0,message:"请输入说明",trigger:"blur"}]},relevanceRules:{file:[{required:!0,message:"请输入文件完整路径",trigger:"blur"}],explain:[{required:!0,message:"请输入说明",trigger:"blur"}]},relyOnRules:{name:[{required:!0,message:"请选择插件",trigger:"blur"}]},indexesType:[{value:"INDEX",label:"INDEX"},{value:"UNIQUE",label:"UNIQUE"},{value:"SPATIAL",label:"SPATIAL"}],db:{sort:[{value:"utf8_general_ci",label:"utf8_general_ci"},{value:"utf8mb4_unicode_ci",label:"utf8mb4_unicode_ci"}],attribute:[{value:"BINARY",label:"BINARY"},{value:"UNSIGNED",label:"UNSIGNED"}],path:[],type:[{label:"数字",options:[{value:"tinyInteger",label:"TINYINT"},{value:"smallInteger",label:"SMALLINT"},{value:"mediumInteger",label:"MEDIUMINT"},{value:"integer",label:"INT"},{value:"bigInteger",label:"BIGINT"}]},{label:"日期与时间",options:[{value:"timestamp",label:"TIMESTAMP"}]},{label:"文本",options:[{value:"char",label:"CHAR"},{value:"string",label:"VARCHAR"},{value:"text",label:"TEXT"},{value:"mediumText",label:"MEDIUMTEXT"},{value:"longText",label:"LONGTEXT"}]},{label:"JSON",options:[{value:"json",label:"JSON"}]}]},temp:{fullScreen:!1,name:"",annotation:"",indexes:[],attribute:[],softDeletes:0,timestamps:1,after_end:!0,backstage:!0,data_table:!0,jurisdiction:!0,client:!0,reset:!0},markdownOption:{bold:!0,italic:!0,header:!0,quote:!0,ol:!0,ul:!0,link:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},xssOptions:{whiteList:{img:["src","alt","width","height"]},stripIgnoreTagBody:!0},fromData:[],oldFromData:[],toData:[],mode:"transfer"}},created:function(){this.isEdit?(this.name=this.$route.query.name,this.details()):this.getJurisdiction(),this.getRoutes(),this.getModels(),this.getInstallList(),this.getTemplate("client"),this.getTemplate("admin")},methods:{getTemplate:function(e){var t=this;(0,n.template)(e).then(function(l){"admin"===e?t.adminTemplate=l.data:t.template=l.data})},getModels:function(){var e=this;(0,n.models)().then(function(t){e.models=t.data})},getInstallList:function(){var e=this;(0,n.installList)().then(function(t){e.relyOn=t.data})},getJurisdiction:function(){var e=this,t=this.ruleForm.packagingJurisdiction?this.ruleForm.packagingJurisdiction:[];(0,n.jurisdiction)({packagingJurisdiction:t}).then(function(t){e.fromData=t.data})},getRoutes:function(){var e=this;(0,n.routes)().then(function(t){e.path=t.data})},details:function(){var e=this;(0,n.details)(this.name).then(function(t){e.ruleForm=t.data,e.ruleForm.db.forEach(function(e){e.reset&&(e.reset=!1)}),e.ruleForm.observer.forEach(function(e){e.reset&&(e.reset=!1)}),e.ruleForm.instructions=e.ruleForm.instructions?e.ruleForm.instructions:"",e.ruleForm.packagingJurisdiction=e.ruleForm.packagingJurisdiction?e.ruleForm.packagingJurisdiction:[],e.ruleForm.relyOn=e.ruleForm.relyOn?e.ruleForm.relyOn:[],e.toData=e.ruleForm.packagingJurisdiction,e.ruleForm.routes=!1,e.versions=t.data.versions,e.ruleForm.old_abbreviation=JSON.parse((0,a.default)(e.ruleForm.abbreviation)),e.getJurisdiction()}).catch(function(){e.formLoading=!1})},addDBAttribute:function(){this.temp.attribute.push({name:"",type:"",length:"",default:"",sort:"utf8_general_ci",attribute:"",is_empty:"",AUTO_INCREMENT:"",annotation:""})},addDBIndexes:function(){var e=this;this.dialogIndexes=!0,this.dialogIndexesIndex="",this.indexesTemp={name:"",type:"",field:[]},this.$nextTick(function(){e.$refs.indexesForm.clearValidate()})},deleteDBAttribute:function(e){this.temp.attribute.splice(e,1)},deleteIndexes:function(e){this.temp.indexes.splice(e,1)},editIndexes:function(e,t){this.dialogIndexes=!0,this.dialogIndexesIndex=t,this.indexesTemp=e},addObserverTable:function(){var e=this;this.dialogObserver=!0,this.dialogObserverIndex="",this.observerTemp={name:"",models:"",path:"",explain:"",reset:!1},this.$nextTick(function(){e.$refs.observerForm.clearValidate()})},addRelyOnTable:function(){var e=this;this.dialogRelyOn=!0,this.dialogRelyOnIndex="",this.relyOnTemp={name:"",abbreviation:"",versions:"",must:!1},this.$nextTick(function(){e.$refs.relyOnForm.clearValidate()})},addRelevanceTable:function(){var e=this;this.dialogRelevance=!0,this.dialogRelevanceIndex="",this.relevanceTemp={file:"",explain:""},this.$nextTick(function(){e.$refs.relevanceForm.clearValidate()})},addDataTable:function(){var e=this;this.dbEdit=!1,this.dialogDataTable=!0,this.dialogDataTableIndex="",this.temp={name:"",annotation:"",indexes:[],attribute:[],softDeletes:0,timestamps:1,after_end:!0,backstage:!0,data_table:!0,jurisdiction:!0,client:!0,reset:!0},this.$nextTick(function(){e.$refs.dataTableForm.clearValidate(),e.setSort()})},editDataTable:function(e,t){var l=this;this.dbEdit=!0,this.dialogDataTable=!0,this.dialogDataTableIndex=t,this.temp=e,this.$nextTick(function(){l.setSort()})},editObserverTable:function(e,t){this.observerEdit=!0,this.dialogObserver=!0,this.dialogObserverIndex=t,this.observerTemp=e},editRelevanceTable:function(e,t){this.relevanceEdit=!0,this.dialogRelevance=!0,this.dialogRelevanceIndex=t,this.relevanceTemp=e},editRelyOnTable:function(e,t){this.relyOnEdit=!0,this.dialogRelyOn=!0,this.dialogRelyOnIndex=t,this.relyOnTemp=e},observerSubmit:function(){var e=this;this.$refs.observerForm.validate(function(t){t&&(e.dialogObserver=!1,""!==e.dialogObserverIndex?e.ruleForm.observer[e.dialogObserverIndex]=e.observerTemp:e.ruleForm.observer.push(e.observerTemp))})},relevanceSubmit:function(){var e=this;this.$refs.relevanceForm.validate(function(t){t&&(e.dialogRelevance=!1,""!==e.dialogRelevanceIndex?e.ruleForm.relevance[e.dialogRelevanceIndex]=e.relevanceTemp:e.ruleForm.relevance.push(e.relevanceTemp))})},relyOnSubmit:function(){var e=this;this.$refs.relyOnForm.validate(function(t){t&&(e.relyOn.map(function(t){t.name===e.relyOnTemp.name&&(e.relyOnTemp.abbreviation=t.abbreviation,e.relyOnTemp.versions=t.versions)}),e.dialogRelyOn=!1,""!==e.dialogRelyOnIndex?e.ruleForm.relyOn[e.dialogRelyOnIndex]=e.relyOnTemp:e.ruleForm.relyOn.push(e.relyOnTemp))})},dataTableSubmit:function(){var e=this;this.$refs.dataTableForm.validate(function(t){t?(e.dialogDataTable=!1,""!==e.dialogDataTableIndex?e.ruleForm.db[e.dialogDataTableIndex]=e.temp:e.ruleForm.db.push(e.temp)):e.$message.error("存在未填写信息")})},deleteDataTable:function(e){var t=this,l=this.$t("hint.succeed.win",{attribute:this.$t("common.delete")});this.$confirm("是否确认删除该表?",this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){t.ruleForm.db.splice(e,1),t.$notify({title:t.$t("common.succeed"),message:l,type:"success",duration:2e3})})},deleteObserverTable:function(e){var t=this,l=this.$t("hint.succeed.win",{attribute:this.$t("common.delete")});this.$confirm("是否确认删除该观察者?",this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){t.ruleForm.observer.splice(e,1),t.$notify({title:t.$t("common.succeed"),message:l,type:"success",duration:2e3})})},deleteRelevanceTable:function(e){var t=this,l=this.$t("hint.succeed.win",{attribute:this.$t("common.delete")});this.$confirm("是否确认删除该关联文件?",this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){t.ruleForm.relevance.splice(e,1),t.$notify({title:t.$t("common.succeed"),message:l,type:"success",duration:2e3})})},deleteRelyOnTable:function(e){var t=this;this.$confirm("是否确认删除该依赖插件?",this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){t.ruleForm.relyOn.splice(e,1),t.$notify({title:t.$t("common.succeed"),message:"删除成功",type:"success",duration:2e3})})},indexesSubmit:function(){var e=this;this.$refs.indexesForm.validate(function(t){t&&(e.dialogIndexes=!1,""!==e.dialogIndexesIndex?e.temp.indexes[e.dialogIndexesIndex]=e.indexesTemp:e.temp.indexes.push(e.indexesTemp))})},setSort:function(){var e=document.querySelector(".dragTable .el-table__body-wrapper tbody"),t=this;r.default.create(e,{onEnd:function(e){var l=e.newIndex,a=e.oldIndex,n=t.temp.attribute.splice(a,1)[0];t.temp.attribute.splice(l,0,n);var r=t.temp.attribute.slice(0);t.temp.attribute=[],t.$nextTick(function(){t.temp.attribute=r})}})},fullScreen:function(e){this.fullScreen=e},submit:function(){var e=this;this.formLoading=!0,this.$refs.ruleForm.validate(function(t){if(t)if(e.name){if(e.ruleForm.publish&&e.versions===e.ruleForm.versions)return e.$message.error("已发布的版本无法直接编辑，请修改版本号"),e.formLoading=!1,!1;(0,n.edit)(e.ruleForm).then(function(){e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1})}else(0,n.create)(e.ruleForm).then(function(){e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1});else e.formLoading=!1})},add:function(e,t,l){this.ruleForm.packagingJurisdiction=t,this.$forceUpdate()},remove:function(e,t,l){this.ruleForm.packagingJurisdiction=t,this.$forceUpdate()}}}},FeZ8:function(e,t,l){"use strict";l.r(t);var a=l("5R5Q"),n=l.n(a);for(var r in a)"default"!==r&&function(e){l.d(t,e,function(){return a[e]})}(r);t.default=n.a},lEg2:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getList=function(e){return(0,a.default)({url:"plugin",method:"GET",params:e})},t.install=function(e){return(0,a.default)({url:"plugin/install/"+e,method:"GET"})},t.create=function(e){return e=n.default.parse(e),(0,a.default)({url:"plugin",method:"POST",data:e})},t.edit=function(e){return e=n.default.parse(e),(0,a.default)({url:"plugin/"+e.abbreviation,method:"POST",data:e})},t.publish=function(e){return(0,a.default)({url:"plugin/publish/"+e,method:"POST"})},t.updatePack=function(e,t){return t=n.default.parse(t),(0,a.default)({url:"plugin/updatePack/"+e,method:"POST",data:t})},t.details=function(e){return(0,a.default)({url:"plugin/"+e,method:"GET"})},t.destroy=function(e){return(0,a.default)({url:"plugin/destroy/"+e,method:"POST"})},t.uninstall=function(e){return(0,a.default)({url:"plugin/uninstall/"+e,method:"POST"})},t.routes=function(){return(0,a.default)({url:"plugin/routes/no_get",method:"GET"})},t.models=function(){return(0,a.default)({url:"plugin/models/all",method:"GET"})},t.template=function(e){return(0,a.default)({url:"plugin/template/"+e,method:"GET"})},t.jurisdiction=function(e){return(0,a.default)({url:"plugin/jurisdiction/all",method:"POST",data:e})},t.diff=function(e){return(0,a.default)({url:"plugin/diff/"+e,method:"GET"})},t.conflictResolution=function(e,t){return(0,a.default)({url:"plugin/conflictResolution/"+e,method:"POST",data:t})},t.installList=function(){return(0,a.default)({url:"plugin/installList/all",method:"GET"})},t.verifyPlugin=function(e){return(0,a.default)({url:"verifyPlugin/"+e,method:"POST"})};var a=r(l("t3Un")),n=r(l("Qyje"));function r(e){return e&&e.__esModule?e:{default:e}}},vvI1:function(e,t,l){"use strict";l.r(t);var a=l("2A0X"),n=l("FeZ8");for(var r in n)"default"!==r&&function(e){l.d(t,e,function(){return n[e]})}(r);l("+gJB");var i=l("KHd+"),o=Object(i.a)(n.default,a.a,a.b,!1,null,"2946759c",null);o.options.__file="Detail.vue",t.default=o.exports}}]);