(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ca3e"],{"0Jp/":function(e,t,o){"use strict";o.r(t);var i=o("xA3a"),r=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t.default=r.a},"3p40":function(e,t,o){},44:function(e,t){},"6Epc":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"createPost-container",staticStyle:{"padding-top":"40px"}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-left":"100px","padding-right":"100px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[o("h3",[e._v(e._s(e.$t("good.detail.form.title.basic_information")))]),e._v(" "),o("el-form-item",{staticStyle:{width:"700px"},attrs:{label:e.$t("good.detail.form.type.label"),prop:"type"}},[o("el-radio-group",{on:{change:e.setType},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[o("el-radio-button",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.type.radio_group.general")))]),e._v(" "),o("el-radio-button",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.type.radio_group.virtual")))]),e._v(" "),o("el-radio-button",{attrs:{label:2}},[e._v(e._s(e.$t("good.detail.form.type.radio_group.keys")))]),e._v(" "),o("el-radio-button",{attrs:{label:3}},[e._v(e._s(e.$t("good.detail.form.type.radio_group.download")))])],1)],1),e._v(" "),o("el-form-item",{staticStyle:{width:"600px"},attrs:{label:e.$t("good.detail.form.input.label.name"),prop:"name"}},[o("el-input",{attrs:{maxlength:"60",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.upload.label.img"),prop:"img"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-progress":e.handleProgress,action:e.actionurl,headers:e.imgHeaders,data:e.imgMasterData}},[e.imgProgress?o("span",[o("el-progress",{staticClass:"progress-img",attrs:{percentage:e.imgProgressPercent,type:"circle"}})],1):o("span",[e.ruleForm.img?o("el-image",{staticClass:"avatar",attrs:{src:e.ruleForm.img,fit:"scale-down"}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),e._v(" "),o("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("hint.error.each_picture",{size:"2M"}))+"，"+e._s(e.$t("good.detail.form.img_progress_percent")))])],1),e._v(" "),o("el-form-item",{staticStyle:{width:"600px"},attrs:{label:e.$t("good.detail.form.input.label.video"),prop:"video"}},[o("el-input",{attrs:{placeholder:e.$t("good.detail.form.input.placeholder.video"),clearable:""},on:{blur:e.setVideo},model:{value:e.ruleForm.video,callback:function(t){e.$set(e.ruleForm,"video",t)},expression:"ruleForm.video"}}),e._v(" "),o("el-input",{staticStyle:{"padding-top":"10px","padding-bottom":"10px"},attrs:{placeholder:e.$t("good.detail.form.input.placeholder.poster"),clearable:""},on:{blur:e.setPoster},model:{value:e.ruleForm.poster,callback:function(t){e.$set(e.ruleForm,"poster",t)},expression:"ruleForm.poster"}}),e._v(" "),e.ruleForm.video?o("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}):e._e(),e._v(" "),o("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("good.detail.form.input.tip.video")))])],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.upload.label.resource"),prop:"resource"}},[o("el-upload",{attrs:{limit:5,action:e.actionurl,headers:e.imgHeaders,"on-success":e.handleAvatarSuccessList,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUploadList,data:e.imgData,"file-list":e.ruleForm.imgList,multiple:"","list-type":"picture-card"}},[o("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),e._v(" "),o("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("hint.error.upload_amount",{amount:5}))+"，"+e._s(e.$t("hint.error.each_picture",{size:"2M"})))])],1),e._v(" "),o("el-form-item",{staticStyle:{width:"600px"},attrs:{label:e.$t("good.detail.form.input.label.keywords"),prop:"keywords"}},[o("el-input",{attrs:{maxlength:"255",clearable:""},model:{value:e.ruleForm.keywords,callback:function(t){e.$set(e.ruleForm,"keywords",t)},expression:"ruleForm.keywords"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"600px"},attrs:{label:e.$t("good.detail.form.input.label.short_description"),prop:"short_description"}},[o("el-input",{attrs:{maxlength:"160",clearable:""},model:{value:e.ruleForm.short_description,callback:function(t){e.$set(e.ruleForm,"short_description",t)},expression:"ruleForm.short_description"}})],1),e._v(" "),o("h3",[e._v(e._s(e.$t("good.detail.sales_attribute")))]),e._v(" "),o("el-form-item",{staticStyle:{width:"400px"},attrs:{label:e.$t("good.detail.fixed_price"),prop:"price"}},[o("el-input",{attrs:{maxlength:"9",clearable:""},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}}),e._v(" "),o("p",[e._v(e._s(e.$t("good.detail.fixed_price.tip")))])],1),e._v(" "),o("el-form-item",{staticStyle:{width:"400px"},attrs:{label:e.$t("good.detail.total_quantity"),prop:"inventory"}},[o("el-input",{attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.inventory,callback:function(t){e.$set(e.ruleForm,"inventory",t)},expression:"ruleForm.inventory"}}),e._v(" "),o("p",[e._v(e._s(e.$t("good.detail.total_quantity.tip")))])],1),e._v(" "),o("el-form-item",{staticStyle:{width:"400px"},attrs:{label:e.$t("good.detail.form.input.label.number"),prop:"number"}},[o("el-input",{attrs:{maxlength:"50",clearable:""},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),e._v(" "),o("h3",[e._v(e._s(e.$t("good.detail.form.title.specification")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.cascader.label.category_id"),prop:"category_id"}},[o("el-cascader",{attrs:{options:e.goodsTypeLang,props:{expandTrigger:"hover",emitPath:!1},clearable:""},on:{change:e.goodsType},model:{value:e.ruleForm.category_id,callback:function(t){e.$set(e.ruleForm,"category_id",t)},expression:"ruleForm.category_id"}}),e._v(" "),o("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("good.detail.form.cascader.label.tip")))])],1),e._v(" "),e.goods_brand.length>0?o("el-form-item",{attrs:{label:e.$t("good.detail.form.select.label.brand_id"),prop:"brand_id"}},[o("el-select",{attrs:{placeholder:e.$t("common.select"),clearable:""},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.brand_id,callback:function(t){e.$set(e.ruleForm,"brand_id",t)},expression:"ruleForm.brand_id"}},e._l(e.goodsBrandLang,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),e._l(e.good_attribute,function(t,i){return o("el-form-item",{key:i,attrs:{label:t.name}},[1===t.type?o("el-input",{staticStyle:{width:"400px"},attrs:{clearable:""},on:{input:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}}):2===t.type?o("el-select",{attrs:{placeholder:e.$t("common.select"),clearable:""},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}},e._l(t.value,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:t}})})):o("el-select",{attrs:{placeholder:e.$t("common.select"),clearable:"",multiple:""},on:{change:function(t){e.change(t)}},model:{value:e.ruleForm.good_specification[i].data,callback:function(t){e.$set(e.ruleForm.good_specification[i],"data",t)},expression:"ruleForm.good_specification[i]['data']"}},e._l(t.value,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:t}})}))],1)}),e._v(" "),o("sku",{ref:"SkuDemo"}),e._v(" "),o("h3",[e._v(e._s(e.$t("good.detail.form.title.details")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.tinymce.details"),prop:"details"}},[o("tinymce",{ref:"editor",attrs:{disabled:e.disabled,url:e.actionurl,header:e.imgHeaders},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1),e._v(" "),0===e.ruleForm.type?[o("h3",[e._v(e._s(e.$t("good.detail.logistics_information")))]),e._v(" "),o("el-form-item",{attrs:{label:"运费方式",prop:"freight_type"}},[o("el-radio-group",{model:{value:e.ruleForm.freight_type,callback:function(t){e.$set(e.ruleForm,"freight_type",t)},expression:"ruleForm.freight_type"}},[o("el-radio",{attrs:{label:0}},[e._v("固定邮费")]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v("运费模板")])],1)],1),e._v(" "),0===e.ruleForm.freight_type?o("el-form-item",{attrs:{label:"运费",prop:"freight"}},[o("el-radio-group",{model:{value:e.ruleForm.freight,callback:function(t){e.$set(e.ruleForm,"freight",t)},expression:"ruleForm.freight"}},[o("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.freight,callback:function(t){e.$set(e.ruleForm,"freight",t)},expression:"ruleForm.freight"}})],1)],1):o("el-form-item",{attrs:{label:e.$t("good.detail.form.select.label.type"),prop:"freight_id"}},[o("el-select",{attrs:{placeholder:e.$t("common.select"),clearable:""},model:{value:e.ruleForm.freight_id,callback:function(t){e.$set(e.ruleForm,"freight_id",t)},expression:"ruleForm.freight_id"}},e._l(e.freightLang,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),o("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("good.detail.form.select.tip.type")))])],1)]:e._e(),e._v(" "),o("h3",[e._v(e._s(e.$t("good.detail.form.title.set")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.radio_group.label.is_show"),prop:"is_show"}},[o("el-radio-group",{model:{value:e.ruleForm.is_show,callback:function(t){e.$set(e.ruleForm,"is_show",t)},expression:"ruleForm.is_show"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_show.warehouse")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_show.putaway")))]),e._v(" "),o("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_show.timer"))+"\n          "),o("el-date-picker",{attrs:{disabled:2!==e.ruleForm.is_show,placeholder:e.$t("common.date_time"),type:"date",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.timing,callback:function(t){e.$set(e.ruleForm,"timing",t)},expression:"ruleForm.timing"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.radio_group.label.is_inventory"),prop:"is_inventory"}},[o("el-radio-group",{model:{value:e.ruleForm.is_inventory,callback:function(t){e.$set(e.ruleForm,"is_inventory",t)},expression:"ruleForm.is_inventory"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.radio_group.order")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.radio_group.payment")))])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.radio_group.label.is_recommend"),prop:"is_recommend"}},[o("el-radio-group",{model:{value:e.ruleForm.is_recommend,callback:function(t){e.$set(e.ruleForm,"is_recommend",t)},expression:"ruleForm.is_recommend"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_recommend.no")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_recommend.yes")))])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.radio_group.label.is_new"),prop:"is_new"}},[o("el-radio-group",{model:{value:e.ruleForm.is_new,callback:function(t){e.$set(e.ruleForm,"is_new",t)},expression:"ruleForm.is_new"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_new.no")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_new.yes")))])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.radio_group.label.is_hot"),prop:"is_hot"}},[o("el-radio-group",{model:{value:e.ruleForm.is_hot,callback:function(t){e.$set(e.ruleForm,"is_hot",t)},expression:"ruleForm.is_hot"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_hot.no")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("good.detail.form.radio_group.is_hot.yes")))])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("good.detail.form.input.label.sort"),prop:"sort"}},[o("el-radio-group",{model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}},[o("el-input",{staticStyle:{width:"80px"},attrs:{maxlength:"11",clearable:""},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1),e._v(" "),o("el-form-item",{staticClass:"float-button"},[o("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.create():e.edit()}}},[e._v(e._s(e.$t("common.submit")))])],1)],2)],1)},r=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return r})},"6tNa":function(e,t,o){tinymce.PluginManager.add("axupimgs",function(e,t){window.axupimgs={};var o="./static/tinymce"+"/plugins/axupimgs/upfiles.html";axupimgs.images_upload_handler=e.getParam("images_upload_handler",void 0,"function"),axupimgs.images_upload_base_path=e.getParam("images_upload_base_path","","string"),axupimgs.axupimgs_filetype=e.getParam("axupimgs_filetype",".png,.gif,.jpg,.jpeg","string"),axupimgs.res=[];var i=function(){return e.windowManager.openUrl({title:"Ax多图片上传",size:"large",url:o,buttons:[{type:"cancel",text:"Close"},{type:"custom",text:"插入图片",name:"save",primary:!0}],onAction:function(t,o){switch(o.name){case"save":var i="",r=axupimgs.res,a=r.length;if(a<1)return alert("请选上传文件"),!1;for(let e=0;e<a;e++)r[e].url&&(i+='<img src="'+r[e].url+'" />');e.insertContent(i),axupimgs.res=[],t.close()}}})};return e.ui.registry.getAll().icons.axupimgs||e.ui.registry.addIcon("axupimgs",'<svg viewBox="0 0 1280 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M1126.2,779.8V87.6c0-24-22.6-86.9-83.5-86.9H83.5C14.7,0.7,0,63.7,0,87.7v692c0,36.2,29.2,89.7,83.5,89.7l959.3-1.3c51.7,0,83.5-42.5,83.5-88.3zm-1044,4V86.3h961.6V783.7H82.2v0.1z" fill="#ff0000"/><path d="M603,461.6L521.1,366.3,313,629.8,227.2,546.8,102.4,716.8H972.8v-170L768.2,235.2,603.1,461.6zM284.6,358.4a105.4,105.4,0,0,0,73.5-30c19.5-19.1,30.3-45,30.2-71.8,0-56.8-45.9-103-102.4-103-56.6,0-102.4,46.1-102.4,103C183.4,313.5,228,358.4,284.6,358.4z" fill="#ff0000"/><path d="M1197.7,153.6l-0.3,669.3s13.5,113.9-67.4,113.9H153.6c0,24.1,23.9,87.2,83.5,87.2h959.3c58.3,0,83.6-49.5,83.6-89.9V240.8c-0.1-41.8-44.9-87.2-82.3-87.2z" fill="#ff0000"/></svg>'),e.ui.registry.addButton("axupimgs",{icon:"axupimgs",tooltip:"Ax多图片上传",onAction:function(){i()}}),e.ui.registry.addMenuItem("axupimgs",{icon:"axupimgs",text:"图片批量上传...",onAction:function(){i()}}),{getMetadata:function(){return{name:"Ax多图片上传",url:"axupimgs.php"}}}})},"7d6x":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(o("MpT8"));t.default=i.default},"7dcK":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatIds=void 0;var i=a(o("QbLZ")),r=a(o("jo6Y"));function a(e){return e&&e.__esModule?e:{default:e}}t.getLevels=l,t.flatten=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments[2]||{},a=o.optionValue,n=void 0===a?"id":a,s=o.optionText,u=void 0===s?"value":s,d=[],c=0,p={},f=l(e);if(0===e.length)return d;e.forEach(function(e){var t=e.leaf;if(!t||0===t.length)return!0;c=(c||1)*t.length}),t.forEach(function(e){var t=e.skus,o=(0,r.default)(e,["skus"]);p[t.map(function(e){return e.k_id+"_"+e.v_id}).join("|")]=o});for(var m=function(t){var o=[],a=[];e.forEach(function(i,r){var l=i.leaf,s={};if(!l||0===l.length)return!0;if(l.length>1){var d=parseInt(t/f[r],10)%l.length;s=e[r].leaf[d]}else s=e[r].leaf[0];i[n]&&s[n]&&(a.push(i[n]+"_"+s[n]),o.push({k_id:i[n],k:i[u],v_id:s[n],v:s[u]}))});var l=p[a.join("|")]||{},s=(0,r.default)(l,[]);d.push((0,i.default)({},s,{skus:o}))},g=0;g<c;g++)m(g);return d},t.isEqual=function(e,t,o){var i=(o||{}).optionValue,r=void 0===i?"id":i;return t.length===e.length&&t.every(function(o,i){var a=o.leaf,l=void 0===a?[]:a,n=e[i].leaf||[];return e[i][r]===t[i][r]&&l.length===n.length&&l.map(function(e){return e[r]}).join(",")===n.map(function(e){return e[r]}).join(",")})};t.creatIds=function(e){return e.reduce(function(t,o,i){return""+t+o.k_id+"-"+o.v_id+(i===e.length-1?"":"_")},"")};function l(e){for(var t=[],o=e.length-1;o>=0;o--)e[o+1]&&e[o+1].leaf?t[o]=e[o+1].leaf.length*t[o+1]||1:t[o]=1;return t}},"8E0f":function(e,t,o){},"9D+X":function(e,t,o){"use strict";o.r(t);var i=o("7d6x"),r=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t.default=r.a},CyJc:function(e,t,o){"use strict";var i=o("XVEj");o.n(i).a},D5mp:function(e,t,o){"use strict";o.r(t);var i=o("6Epc"),r=o("0Jp/");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);o("xfTD");var l=o("KHd+"),n=Object(l.a)(r.default,i.a,i.b,!1,null,null,null);n.options.__file="Detail.vue",t.default=n.exports},"Hn+/":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tinymce-box"},[o("editor",{attrs:{init:e.init,disabled:e.disabled},on:{onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},r=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return r})},IAgb:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=h(o("m1cH")),a=h(o("Dbz9")),l=h(o("Yz+Y")),n=h(o("iCc5")),s=h(o("V7oC")),u=h(o("FYw3")),d=h(o("mRg0")),c=h(o("Kw5r")),p=h(o("L+H0")),f=h(o("yMd6")),m=o("7Qib"),g=o("vCG0"),_=h(o("o5wi"));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,p.default)({components:{SkuTable:f.default,AvatarImage:_.default}})(i=function(e){function t(){var e,o,i,r;(0,n.default)(this,t);for(var a=arguments.length,s=Array(a),d=0;d<a;d++)s[d]=arguments[d];return o=i=(0,u.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(s))),i.addValues=[],i.productSkus=[],i.specification=[],i.type=0,i.allUnified={cost_price:null,market_price:null,price:null,inventory:null},i.imgData={type:1,size:2097152,specification:[80,150,200,250,300,350]},r=o,(0,u.default)(i,r)}return(0,d.default)(t,e),(0,s.default)(t,[{key:"_setData",value:function(e){if(e&&e.length){var t=(0,g.param2Data)(e),o=t.productSkus,i=t.specification;this.specification=i,this.productSkus=(0,a.default)(o)}}},{key:"_setSpecification",value:function(e){this.specification=e}},{key:"_setType",value:function(e){this.type=e}},{key:"_getData",value:function(){return this.$refs.SkuTable?this.$refs.SkuTable.data:[]}},{key:"addSpec",value:function(){this.specification.push({id:(0,m.createUniqueString)()+"_id",value:"",leaf:[]})}},{key:"delSepc",value:function(e){this.specification.splice(e,1)}},{key:"addOption",value:function(e){var t=this.addValues[e]||"";if(t=t.trim()){var o=this.specification[e].leaf,i=t.split(/\s+/).filter(function(e){return!o.some(function(t){return t.value===e})}).map(function(e){return{id:(0,m.createUniqueString)()+"_id",value:e}});this.specification[e].leaf=(0,m.uniqueArr)([].concat((0,r.default)(o),(0,r.default)(i))),this.$set(this.addValues,e,"")}}},{key:"delOption",value:function(e,t){this.specification[e].leaf.splice(t,1)}},{key:"updateUnifiedInput",value:function(e,t,o,i){this.$refs.SkuTable._setInput(t,e,o,i)}},{key:"getFile",value:function(e,t,o){this.specification[t].leaf[o].file=e.response,this.$forceUpdate(),this.updateUnifiedInput(e.response,"img",t,this.specification[t].leaf[o].value)}},{key:"disabled",get:function(){return this.specification.some(function(e){return!e.value})}},{key:"specificationFilter",get:function(){return this.specification.filter(function(e){return e.value&&e.leaf.length})}}]),t}(c.default))||i;t.default=v},JxI4:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(o("5WJX")),r=o("X4fA");o("RsPH");var a=l(o("ynI1"));function l(e){return e&&e.__esModule?e:{default:e}}o("DWi2"),o("Tqh3"),o("Oupb"),o("B9FH"),o("hOyB"),o("lDS1"),o("ZNhe"),o("MVQK"),o("Qjfq"),o("Cp0W"),o("6tNa"),t.default={name:"Tinymce",components:{Editor:a.default},props:{url:{default:"",type:String},accept:{default:"image/jpeg, image/png, image/gif",type:String},maxSize:{default:2097152,type:Number},value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists image media table link wordcount code fullscreen preview axupimgs"},toolbar:{type:[String,Array],default:"axupimgs media lists table link | undo redo |  formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent  | removeformat code fullscreen image preview"},header:{type:[String,Object],default:""}},data:function(){var e=this;return{init:{language_url:"./static/tinymce/langs/"+((0,r.getToken)("language")||"zh")+".js",language:(0,r.getToken)("language")?"zh"===(0,r.getToken)("language")?"zh_CN":(0,r.getToken)("language"):"zh_CN",skin_url:"./static/tinymce/skins/ui/oxide",content_css:"./static/tinymce/skins/content/default/content.css",height:300,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,images_upload_handler:function(t,o,i){if(t.blob().size>e.maxSize&&i("文件体积过大"),e.accept.indexOf(t.blob().type)>=0){var r=new XMLHttpRequest,a=new FormData,l=e;r.withCredentials=!1,r.open("POST",l.url),r.setRequestHeader("Authorization",l.header.Authorization),r.onload=function(){if(200!==r.status)return l.$emit("on-upload-fail"),void i("上传失败: "+JSON.parse(r.response).message);o(r.responseText)},a.append("file",t.blob()),a.append("type",1),a.append("size",e.maxSize),r.send(a)}else i("图片格式错误")}},myValue:this.value}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}},mounted:function(){i.default.init({})},methods:{onClick:function(e){this.$emit("onClick",e,i.default)},clear:function(){this.myValue=""}}}},L7y4:function(e,t,o){"use strict";o.r(t);var i=o("n3DB"),r=o("RTeI");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);o("aDR0");var l=o("KHd+"),n=Object(l.a)(r.default,i.a,i.b,!1,null,"0542adb4",null);n.options.__file="index.vue",t.default=n.exports},LGSU:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",{staticClass:"avatar-uploader",style:{height:e.height+"px",width:e.width+"px"},attrs:{action:e.url,data:e.imgData,headers:e.imgHeaders,"show-file-list":!1,"on-success":e.handleSuccessList,"before-upload":e.beforeUploadList,"on-error":e.handleError}},[e.file?[1===e.imgData.type?o("el-image",{attrs:{src:e.file,fit:"cover"}}):o("i",{staticClass:"el-icon-folder avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})]:o("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:{height:e.height+"px",width:e.width+"px"}})],2)],1)},r=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return r})},MpT8:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("X4fA");t.default={name:"AvatarImage",props:{imgData:{type:Object,default:function(){return{type:1,size:2097152,specification:[80,150]}}},format:{type:Array,default:function(){return["image/jpeg","image/gif","image/png","image/bmp"]}},height:{type:Number,default:160},width:{type:Number,default:160},file:{type:String,default:""}},data:function(){return{url:"http://tfshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:(0,i.getToken)("token_type")+" "+(0,i.getToken)("access_token")}}},watch:{},mounted:function(){},methods:{handleSuccessList:function(e,t){this.$emit("getFile",t)},beforeUploadList:function(e){var t=e.size<this.imgData.size;return-1===this.format.indexOf(e.type)?(this.$message.error("请上传正确的文件格式"),!1):(t||this.$message.error("上传文件大小不能超过 "+e.size/1024/1024+"MB!"),t)},handleError:function(e){this.$message.error(JSON.parse(e.message).message)}}}},OUSa:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("el-table",e._g(e._b({staticStyle:{width:"100%"},attrs:{data:e.data,border:""}},"el-table",e.$attrs,!1),e.$listeners),[e._l(e.columns,function(t,i){return o("el-table-column",{key:i,attrs:{label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.skus[i].v)+"\n      ")]}}])})}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.image"),prop:"img",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"img"}},[o("el-upload",{staticClass:"avatar-uploaders",attrs:{"show-file-list":!1,"on-success":function(o,i){return e.specificationMarketAvatarSuccess(o,t.$index)},"before-upload":e.beforeAvatarUpload,action:e.actionurl,headers:e.imgHeaders,data:e.imgData}},[t.row.img?o("img",{staticClass:"avatar",staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.img}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icons"})])],1)],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.cost_price"),prop:"cost_price",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"cost_price"}},[o("el-input",{attrs:{placeholder:e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.table.column.label.cost_price")}),size:"mini",clearable:""},on:{input:function(o){return e.updateInput(o,t.$index,"cost_price")}},model:{value:t.row.cost_price,callback:function(o){e.$set(t.row,"cost_price",o)},expression:"scope.row.cost_price"}})],1)],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.market_price"),prop:"market_price",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"market_price"}},[o("el-input",{attrs:{placeholder:e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.table.column.label.market_price")}),size:"mini",clearable:""},on:{input:function(o){return e.updateInput(o,t.$index,"market_price")}},model:{value:t.row.market_price,callback:function(o){e.$set(t.row,"market_price",o)},expression:"scope.row.market_price"}})],1)],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.price"),prop:"price",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"price"}},[o("el-input",{attrs:{placeholder:e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.table.column.label.price")}),size:"mini",clearable:""},on:{input:function(o){return e.updateInput(o,t.$index,"price")}},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}})],1)],1)]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.inventory"),prop:"address",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"inventory"}},[o("el-input",{attrs:{placeholder:e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.table.column.label.inventory")}),size:"mini",clearable:""},on:{input:function(o){return e.updateInput(o,t.$index,"inventory")}},model:{value:t.row.inventory,callback:function(o){e.$set(t.row,"inventory",o)},expression:"scope.row.inventory"}})],1)],1)]}}])}),e._v(" "),2===e.type?o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.good_code"),prop:"good_code",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.addRuleForm(t.row,t.$index)}}},[e._v(e._s(t.row.good_code?e.$t("good.sku.table.column.button.amend"):e.$t("good.sku.table.column.button.add")))])]}}])}):e._e(),e._v(" "),3===e.type?o("el-table-column",{attrs:{label:e.$t("good.sku.table.column.label.file"),prop:"file",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{attrs:{model:t.row}},[o("el-form-item",{attrs:{prop:"file"}},[o("avatar-image",{attrs:{height:80,width:80,file:t.row.file,format:e.fileFormat,"img-data":e.fileData},on:{getFile:function(o){return e.getFileFile(o,t.$index)}}}),e._v(" "),t.row.file?[o("div",{staticClass:"file-name",attrs:{title:t.row.file_name}},[e._v(e._s(t.row.file_name))])]:e._e()],2)],1)]}}])}):e._e()],2),e._v(" "),o("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogFormVisible,title:e.$t("good.sku.dialog.title.add_carmi"),center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"dataForm",attrs:{model:e.ruleForm,"label-position":"cente","label-width":"120px"}},[o("el-form-item",{attrs:{label:e.$t("good.sku.dialog.form.radio_group.code_type"),prop:"code_type"}},[o("el-radio-group",{model:{value:e.ruleForm.code_type,callback:function(t){e.$set(e.ruleForm,"code_type",t)},expression:"ruleForm.code_type"}},[o("el-radio-button",{attrs:{label:0}},[e._v(e._s(e.$t("good.sku.dialog.form.radio_group.code_type.carmi")))]),e._v(" "),o("el-radio-button",{attrs:{label:1}},[e._v(e._s(e.$t("good.sku.dialog.form.radio_group.code_type.web_disk")))])],1)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:e.$t("good.sku.dialog.form.radio_group.is_fixed"),prop:"is_fixed"}},[o("el-radio-group",{on:{change:e.changeIsFixed},model:{value:e.ruleForm.is_fixed,callback:function(t){e.$set(e.ruleForm,"is_fixed",t)},expression:"ruleForm.is_fixed"}},[o("el-radio-button",{attrs:{label:1}},[e._v(e._s(e.$t("common.yes")))]),e._v(" "),o("el-radio-button",{attrs:{label:0}},[e._v(e._s(e.$t("common.no")))])],1),e._v(" "),o("p",[e._v(e._s(e.$t("good.sku.dialog.form.radio_group.tip.is_fixed"))+"}")])],1),e._v(" "),o("el-form-item",{attrs:{prop:"good_code"}},[o("el-table",{staticStyle:{width:"100%",height:"200px","overflow-y":"auto"},attrs:{data:e.ruleForm.good_code}},[o("el-table-column",{attrs:{label:1===e.ruleForm.code_type?e.$t("good.sku.dialog.form.table.column.good_code.url"):e.$t("good.sku.dialog.form.table.column.good_code.card_number"),prop:"name",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{disabled:!!t.row.state,placeholder:1===e.ruleForm.code_type?e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.dialog.form.table.column.good_code.url")}):e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.dialog.form.table.column.good_code.card_number")})+"("+e.$t("common.not_required")+")",size:"mini",clearable:""},model:{value:t.row.name,callback:function(o){e.$set(t.row,"name",o)},expression:"scope.row.name"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:1===e.ruleForm.code_type?e.$t("good.sku.dialog.form.table.column.code.code"):e.$t("good.sku.dialog.form.table.column.code.carmi"),prop:"code",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{disabled:!!t.row.state,placeholder:1===e.ruleForm.code_type?e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.dialog.form.table.column.code.code")}):e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.dialog.form.table.column.code.carmi")}),size:"mini",clearable:""},model:{value:t.row.code,callback:function(o){e.$set(t.row,"code",o)},expression:"scope.row.code"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("common.operation"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.state?e._e():o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.deleteGoodCode(t.$index)}}},[e._v(e._s(e.$t("common.delete")))])]}}])})],1),e._v(" "),1===e.ruleForm.is_fixed&&0===e.ruleForm.good_code.length||0===e.ruleForm.is_fixed?o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addGoodCode()}}},[e._v(e._s(e.$t("common.newly_increased")))]):e._e(),e._v(" "),0===e.ruleForm.is_fixed?o("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){e.importGoodCode()}}},[e._v(e._s(e.$t("good.sku.dialog.form.button")))]):e._e()],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveGoodCode()}}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)},r=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return r})},RTeI:function(e,t,o){"use strict";o.r(t);var i=o("IAgb"),r=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t.default=r.a},Wkq7:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exports=void 0,t.getList=function(e){return(0,i.default)({url:"good",method:"GET",params:e})},t.count=function(){return(0,i.default)({url:"goodCount",method:"GET"})},t.create=function(e){return e=r.default.parse(e),(0,i.default)({url:"good",method:"POST",data:e})},t.edit=function(e){return e=r.default.parse(e),(0,i.default)({url:"good/"+e.id,method:"POST",data:e})},t.destroy=function(e,t){return t=r.default.parse(t),(0,i.default)({url:"good/destroy/"+e,method:"POST",data:t})},t.detail=function(e){return(0,i.default)({url:"good/"+e,method:"GET"})},t.state=function(e,t){return t=r.default.parse(t),(0,i.default)({url:"good/state/"+e,method:"POST",data:t})},t.specification=function(e){return(0,i.default)({url:"good/specification/"+e,method:"GET"})};var i=a(o("t3Un")),r=a(o("Qyje"));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=function(e){return e=r.default.parse(e),(0,i.default)({url:"good/export/all",method:"POST",data:e})}},"Wnp+":function(e,t,o){"use strict";var i=o("tO/N");o.n(i).a},XVEj:function(e,t,o){},aDR0:function(e,t,o){"use strict";var i=o("8E0f");o.n(i).a},alm3:function(e,t,o){"use strict";o.r(t);var i=o("Hn+/"),r=o("v1P2");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);var l=o("KHd+"),n=Object(l.a)(r.default,i.a,i.b,!1,null,null,null);n.options.__file="index.vue",t.default=n.exports},jqbs:function(e,t,o){"use strict";o.r(t);var i=o("w4xS"),r=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t.default=r.a},n3DB:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("h3",[e._v(e._s(e.$t("good.sku.title.set_product_parameters")))]),o("el-form-item",[o("div",{staticClass:"sku_container"},[e._l(e.specification,function(t,i){return o("div",{key:t.id,staticClass:"sku_group mb10"},[o("div",{staticClass:"spec_title"},[o("span",{staticClass:"label"},[e._v(e._s(e.$t("good.sku.form.input.label.specification_name"))+"："),o("el-input",{staticClass:"input",attrs:{placeholder:e.$t("hint.error.please_enter",{attribute:e.$t("good.sku.form.input.label.specification_name")})},model:{value:t.value,callback:function(o){e.$set(t,"value","string"==typeof o?o.trim():o)},expression:"spec.value"}}),o("span",{staticClass:"remove",on:{click:function(t){e.delSepc(i)}}},[e._v("×")])],1),o("div",{staticClass:"group_container"},[o("span",{staticClass:"label"},[e._v(e._s(e.$t("good.sku.form.input.label.specification_value"))+"：")]),e._l(t.leaf,function(t,r){return o("el-popover",{key:r,attrs:{placement:"bottom",width:"200",trigger:"click"}},[o("div",{staticClass:"popover"},[o("el-input",{staticStyle:{width:"110px"},model:{value:t.value,callback:function(o){e.$set(t,"value","string"==typeof o?o.trim():o)},expression:"option.value"}}),o("avatar-image",{staticClass:"upload",attrs:{file:t.file,imgData:e.imgData,height:36,width:36},on:{getFile:function(t){return e.getFile(t,i,r)}}}),o("el-tooltip",{attrs:{content:e.$t("good.sku.form.tooltip.content.specification_value"),effect:"dark",placement:"top-start"}},[o("i",{staticClass:"el-icon-question"})])],1),o("div",{staticClass:"sku_item",attrs:{slot:"reference"},slot:"reference"},[o("span",{staticClass:"remove",on:{click:function(t){t.stopPropagation(),e.delOption(i,r)}}},[e._v("×")]),o("div",{staticClass:"text"},[e._v(e._s(t.value))])])])})],2),o("el-input",{staticClass:"input",attrs:{"suffix-icon":"el-icon-plus",placeholder:e.$t("good.sku.form.input.placeholder.specification_value")},on:{blur:function(t){e.addOption(i)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addOption(i)}},model:{value:e.addValues[i],callback:function(t){e.$set(e.addValues,i,t)},expression:"addValues[index]"}})],1)])}),o("div",{staticClass:"spec_title"},[o("el-button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.addSpec}},[e._v(e._s(e.$t("good.sku.form.button.add")))])],1)],2)]),e.specification.length?o("el-form-item",{staticClass:"sku-unified-set",attrs:{label:e.$t("good.sku.form.input.label.uniform_sets")}},[o("el-input",{staticClass:"input",attrs:{placeholder:e.$t("good.sku.form.input.placeholder.cost_price"),clearable:"clearable"},on:{input:function(t){return e.updateUnifiedInput(t,"cost_price")}},model:{value:e.allUnified.cost_price,callback:function(t){e.$set(e.allUnified,"cost_price",t)},expression:"allUnified.cost_price"}}),o("el-input",{staticClass:"input",attrs:{placeholder:e.$t("good.sku.form.input.placeholder.market_price"),clearable:"clearable"},on:{input:function(t){return e.updateUnifiedInput(t,"market_price")}},model:{value:e.allUnified.market_price,callback:function(t){e.$set(e.allUnified,"market_price",t)},expression:"allUnified.market_price"}}),o("el-input",{staticClass:"input",attrs:{placeholder:e.$t("good.sku.form.input.placeholder.price"),clearable:"clearable"},on:{input:function(t){return e.updateUnifiedInput(t,"price")}},model:{value:e.allUnified.price,callback:function(t){e.$set(e.allUnified,"price",t)},expression:"allUnified.price"}}),o("el-input",{staticClass:"input",attrs:{placeholder:e.$t("good.sku.form.input.placeholder.inventory"),clearable:"clearable"},on:{input:function(t){return e.updateUnifiedInput(t,"inventory")}},model:{value:e.allUnified.inventory,callback:function(t){e.$set(e.allUnified,"inventory",t)},expression:"allUnified.inventory"}})],1):e._e(),e.specification.length?o("el-form-item",[o("div",{staticClass:"sku_container"},[o("SkuTable",{ref:"SkuTable",attrs:{specification:e.specificationFilter,type:e.type,productSkus:e.productSkus},on:{"update:specification":function(t){e.specificationFilter=t},"update:productSkus":function(t){e.productSkus=t}}})],1)]):e._e()],1)},r=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return r})},o5wi:function(e,t,o){"use strict";o.r(t);var i=o("LGSU"),r=o("9D+X");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);o("CyJc");var l=o("KHd+"),n=Object(l.a)(r.default,i.a,i.b,!1,null,"aeb3b832",null);n.options.__file="AvatarImage.vue",t.default=n.exports},"tO/N":function(e,t,o){},v1P2:function(e,t,o){"use strict";o.r(t);var i=o("JxI4"),r=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t.default=r.a},vCG0:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(o("/f1G")),r=s(o("YEIV")),a=s(o("QbLZ"));t.param2Data=function(e){if(!e||!e.length)return;var t={},o={},s={},u=e.map(function(e){var i=(0,a.default)({},e,{product_sku_id:e.id,skus:e.product_sku.map(function(e){var i=(0,l.createUniqueString)()+"_id",n=(0,l.createUniqueString)()+"_id";o[e.key]||(o[e.key]=i),s[e.value]||(s[e.value]=n);var u=o[e.key],d=s[e.value];return t[e.key]={value:e.key,id:u,leaf:(0,a.default)({},t[e.key]?t[e.key].leaf:{},(0,r.default)({},e.value,{value:e.value,id:d}))},{k_id:u,k:e.key,v_id:d,v:e.value}})});return(0,a.default)({},i,{ids:(0,n.creatIds)(i.skus)})}),d=(0,i.default)(t).map(function(e){return(0,a.default)({},e,{leaf:(0,i.default)(e.leaf)})});return{productSkus:u,specification:d}};var l=o("7Qib"),n=o("7dcK");function s(e){return e&&e.__esModule?e:{default:e}}},w4xS:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=h(o("Yz+Y")),a=h(o("iCc5")),l=h(o("V7oC")),n=h(o("FYw3")),s=h(o("mRg0")),u=h(o("QbLZ")),d=h(o("gDS+")),c=h(o("Kw5r")),p=h(o("L+H0")),f=o("7dcK"),m=o("7Qib"),g=o("X4fA"),_=h(o("o5wi"));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,p.default)({components:{AvatarImage:_.default},props:{specification:{type:Array,default:function(){return[]}},type:{type:Number,default:0},productSkus:{type:Array,default:function(){return[]}}},data:function(){return{actionurl:"http://tfshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,g.getToken)("access_token")},imgData:{type:1,size:2097152,specification:[80,150,200,250,300,350]},fileFormat:["application/x-zip-compressed","application/zip","application/json","image/jpeg","image/png","image/gif"],fileData:{type:2,full:!0,size:5242880},dialogFormVisible:!1,ruleForm:{is_fixed:1,code_type:0,index:0,good_code:[]}}},computed:{skusList:function(){return(0,f.flatten)(this.specification).map(function(e){return{skus:e.skus,ids:(0,f.creatIds)(e.skus)}})},columns:function(){return this.specification.map(function(e){return{label:e.value,formater:function(t){return t.skus.find(function(t){return t.k===e.value}).v}}})}},methods:{updateInput:function(e,t,o){this.data[t][o]=e,this.data=JSON.parse((0,d.default)(this.data))},_setInput:function(e,t,o,i){this.data.map(function(r){"img"===e?r.product_sku[o].value===i&&(r[e]=t):r[e]=t}),this.data=JSON.parse((0,d.default)(this.data))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png","image/bmp"].indexOf(e.type)?(this.$message.error(this.$t("hint.upload.img.rmvb")),!1):(t||this.$message.error(this.$t("hint.upload.img.can_not_surpass",{size:"2MB"})),t)},specificationMarketAvatarSuccess:function(e,t){this.data[t].img=e,this.data=JSON.parse((0,d.default)(this.data))},getFileFile:function(e,t){this.data[t].file=e.response.url,this.data[t].file_name=e.name,this.data=JSON.parse((0,d.default)(this.data))},addRuleForm:function(e,t){e.good_code?(this.ruleForm.is_fixed=e.is_fixed,this.ruleForm.code_type=e.code_type,this.ruleForm.index=t,this.ruleForm.good_code=e.good_code):this.ruleForm={is_fixed:1,code_type:0,index:t,good_code:[]},this.dialogFormVisible=!0},addGoodCode:function(){this.ruleForm.good_code.push({name:"",code:""})},importGoodCode:function(){var e=this,t=this.$t("good.sku.function.import_good_code_input_placeholder.one");1===this.ruleForm.code_type&&(t=this.$t("good.sku.function.import_good_code_input_placeholder.two")),this.$prompt(this.$t("hint.error.please_enter",{attribute:this.$t("good.sku.function.import_good_code.prompt.carmi")}),this.$t("common.hint"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t(""),inputType:"textarea",inputPlaceholder:t}).then(function(t){var o=t.value.split(/[(\r\n)\r\n]+/),i=null;for(var r in o){if((i=o[r].split(":")).length<2)return e.$message({type:"info",message:e.$t("good.sku.function.import_good_code.message.carmi")}),!1;e.ruleForm.good_code.push({name:i[0],code:i[1]})}})},deleteGoodCode:function(e){this.ruleForm.good_code.splice(e,1)},saveGoodCode:function(){this.data[this.ruleForm.index].code_type=this.ruleForm.code_type,this.data[this.ruleForm.index].good_code=this.ruleForm.good_code,this.data[this.ruleForm.index].is_fixed=this.ruleForm.is_fixed,this.dialogFormVisible=!1,this.data=JSON.parse((0,d.default)(this.data))},changeIsFixed:function(){this.ruleForm.good_code=[]}},watch:{skusList:{deep:!0,immediate:!0,handler:function(e,t){var o=this;if(!e.length)return this.data=[];if(!t||!t.length)return this.initData(e);if(e.length===t.length)return this.data=e.map(function(e,t){return(0,u.default)({},o.data[t],e)});if(e[0].skus.length!==t[0].skus.length)return this.initData(e);var i=this.diffIds(e,t);if(e.length>t.length){var r=[];e.forEach(function(e){var t=o.data.find(function(t){return t.ids===e.ids});t?r.push(t):r.push((0,u.default)({},e,{format:"",guide_price:void 0,purchase_price:void 0,sell_price:void 0}))}),this.data=r}else this.data=this.data.filter(function(e){return!i.includes(e.ids)})}}}})(i=function(e){function t(){var e,o,i,l;(0,a.default)(this,t);for(var s=arguments.length,u=Array(s),d=0;d<s;d++)u[d]=arguments[d];return o=i=(0,n.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),i.data=[],i.coefficient={purchase_coefficient:0,guide_coefficient:0},i.columnsProps={align:"center",minWidth:100},l=o,(0,n.default)(i,l)}return(0,s.default)(t,e),(0,l.default)(t,[{key:"diffIds",value:function(e,t){return e=e.map(function(e){return e.ids}),t=t.map(function(e){return e.ids}),(0,m.diffArary)(e,t)}},{key:"initData",value:function(e){if(this.productSkus&&this.productSkus.length)return this.data=this.productSkus,void this.$emit("update:productSkus",[]);this.data=e.map(function(e){return(0,u.default)({},e,{format:"",guide_price:void 0,purchase_price:void 0,sell_price:void 0})})}}]),t}(c.default))||i;t.default=v},xA3a:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(o("QbLZ")),r=o("Wkq7"),a=o("X4fA"),l=u(o("alm3")),n=u(o("L7y4"));o("/aIJ");var s=o("1tPa");function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"GoodDetail",components:{tinymce:l.default,Sku:n.default,videoPlayer:s.videoPlayer},props:{isEdit:{type:Boolean,default:!1}},data:function(){var e=this,t=function(t,o,i){o&&/^\d+.?\d{0,2}$/.test(o)||i(new Error(e.$t("good.detail.form.validate_price"))),i()};return{formLoading:!1,dialogFormVisible:!1,freight:[],disabled:!1,sku:[],goods_brand:[],attributeMarket:[],dialogImageUrl:"",actionurl:"http://tfshop.test/api/v1/admin/uploadPictures",imgHeaders:{Authorization:"Bearer "+(0,a.getToken)("access_token")},good_attribute:[],goods_type:[],imgMasterData:{type:1,size:2097152,specification:[80,150,200,250,300,350]},imgData:{type:1,size:2097152},dialogVisible:!1,loading:!1,id:"",ruleForm:{type:0,name:"",category_id:"",number:"",brand_id:null,inventory:"",good_specification:[],market_price:"",price:"",keywords:"",short_description:"",details:"",img:"",cost_price:"",is_show:1,is_recommend:0,is_new:0,is_hot:0,is_inventory:0,sort:5,freight_id:"",freight_type:0,freight:0},imgProgress:!1,dialogStatus:"create",imgProgressPercent:0,rules:{name:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("good.detail.name")}),trigger:"blur"}],freight_id:[{required:!0,message:this.$t("hint.error.select",{specification:this.$t("good.detail.form.select.label.type")}),trigger:"change"}],img:[{required:!0,message:this.$t("good.detail.img_upload"),trigger:"change"}],market_price:[{required:!1,validator:t,message:this.$t("good.detail.form.validate_price"),trigger:"blur"}],cost_price:[{required:!1,validator:t,message:this.$t("good.detail.form.validate_price"),trigger:"blur"}],price:[{required:!0,validator:this.validateFields,message:this.$t("good.detail.form.validate_price"),trigger:"blur"}],inventory:[{required:!0,validator:this.validateInventoryFields,message:this.$t("good.detail.inventory_integer"),trigger:"blur"}],brand_id:[{required:!0,message:this.$t("hint.error.select",{specification:this.$t("good.detail.form.select.label.brand_id")}),trigger:"blur"}],category_id:[{required:!0,message:this.$t("hint.error.select",{specification:this.$t("good.detail.form.cascader.label.category_id")}),trigger:"blur"}],details:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("good.detail.details")}),trigger:"blur"}],sort:[{required:!0,message:this.$t("hint.error.please_enter",{attribute:this.$t("common.sort")}),trigger:"blur"}],freight_type:[{required:!0,message:"请选择运费方式",trigger:"change"}],freight:[{required:!0,message:"运费不能为空",trigger:"blur"}]}}},computed:{playerOptions:function(){return{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:(0,a.getToken)("language")?"zh"===(0,a.getToken)("language")?"zh-CN":(0,a.getToken)("language"):"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"",src:""}],poster:"",notSupportedMessage:this.$t("good.detail.player_options_not_supported_message"),controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}},freightLang:function(){var e=this.ruleForm.lang?this.ruleForm.lang:this.$store.state.app.language;return this.freight.filter(function(t){return t.lang===e})},goodsTypeLang:function(){var e=this.ruleForm.lang?this.ruleForm.lang:this.$store.state.app.language;return this.goods_type.filter(function(t){return t.lang===e})},goodsBrandLang:function(){var e=this.ruleForm.lang?this.ruleForm.lang:this.$store.state.app.language;return this.goods_brand.filter(function(t){return t.lang===e})}},created:function(){if(this.isEdit&&(this.id=this.$route.query.id),this.$route.params.lang){var e=this.$route.params;this.ruleForm=(0,i.default)({},e,this.ruleForm)}this.getList()},methods:{validateFields:function(e,t,o){this.ruleForm.price||this.getSkuData().length?o():o(new Error(this.$t("hint.error.not_null",{attribute:this.$t("good.detail.fixed_price")})))},validateInventoryFields:function(e,t,o){this.ruleForm.inventory||this.getSkuData().length?o():o(new Error(this.$t("hint.error.not_null",{attribute:this.$t("good.detail.total_quantity")})))},getList:function(){var e=this;this.loading=!0,(0,r.detail)(this.id?this.id:0,{category:(0,a.getToken)("applyCategory")}).then(function(t){e.id>0&&(e.ruleForm=t.data.goods,e.ruleForm.type===e.$t("good.detail.form.type.radio_group.general")?e.ruleForm.type=0:e.ruleForm.type===e.$t("good.detail.form.type.radio_group.virtual")?e.ruleForm.type=1:e.ruleForm.type===e.$t("good.detail.form.type.radio_group.keys")?e.ruleForm.type=2:e.ruleForm.type===e.$t("good.detail.form.type.radio_group.download")&&(e.ruleForm.type=3),e.setType(e.ruleForm.type),e.goodsType(!0),e.dialogStatus="update",e.$refs.SkuDemo._setData(e.ruleForm.good_sku),e.ruleForm.video&&(e.playerOptions.sources[0].src=e.ruleForm.video),e.ruleForm.poster&&(e.playerOptions.poster=e.ruleForm.poster)),e.goods_type=t.data.category,e.freight=t.data.freight,e.loading=!1})},create:function(){var e=this;this.formLoading=!0,this.$refs.ruleForm.validate(function(t){t?(e.ruleForm.good_sku=e.getSkuData(),(0,r.create)(e.ruleForm).then(function(){e.$notify({title:e.$t("common.succeed"),message:e.$t("hint.succeed.win",{attribute:e.$t("common.add")}),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.back(-1),2e3)}).catch(function(){e.formLoading=!1})):e.formLoading=!1})},edit:function(){var e=this;this.formLoading=!0,this.$refs.ruleForm.validate(function(t){t?(e.ruleForm.good_sku=e.getSkuData(),(0,r.edit)(e.ruleForm).then(function(){e.$notify({title:e.$t("common.succeed"),message:e.$t("hint.succeed.win",{attribute:e.$t("common.update")}),type:"success",duration:2e3}),e.formLoading=!1,setTimeout(e.$router.push({path:"/commodityManagement/good/goodList?page="+e.$route.query.page+"&activeIndex="+e.$route.query.activeIndex}),2e3)}).catch(function(){e.formLoading=!1})):e.formLoading=!1})},handleAvatarSuccess:function(e,t){this.ruleForm.img=t.response,this.imgProgress=!1,this.imgProgressPercent=0},handleProgress:function(e,t){this.imgProgressPercent=e.percent},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png"].indexOf(e.type)?(this.$message.error(this.$t("hint.upload.img.rmvb")),!1):(t||this.$message.error(this.$t("hint.upload.img.can_not_surpass",{size:"2MB"})),this.imgProgress=!0,t)},beforeAvatarUploadList:function(e){var t=e.size/1024/1024<2;return-1===["image/jpeg","image/gif","image/png"].indexOf(e.type)?(this.$message.error(this.$t("hint.upload.img.rmvb")),!1):(t||this.$message.error(this.$t("hint.upload.img.can_not_surpass",{size:"2MB"})),t)},handleAvatarSuccessList:function(e,t,o){this.ruleForm.imgList=o,this.imgProgress=!1,this.imgProgressPercent=0},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.ruleForm.imgList=t},addAttribute:function(e){this.attributeMarket[e.id]?this.attributeMarket[e.id].push({img:"",name:"",typename:e.name}):this.$set(this.attributeMarket,e.id,[{img:"",name:"",typename:e.name}])},goodsType:function(e){var t=this,o=null;(o=this.ruleForm.category_id.length?this.ruleForm.category_id[this.ruleForm.category_id.length-1]:0===this.ruleForm.category_id.length?null:this.ruleForm.category_id)&&(0,r.specification)(o).then(function(o){if(t.ruleForm.good_specification=[],e||(t.ruleForm.brand_id=null),t.goods_brand=[],t.good_attribute=[],!t.isEdit&&t.isDescription){var i=[];o.data.good_parameter_group.forEach(function(e){i.push({id:e.id,value:e.value,leaf:e.good_parameter})}),t.$refs.SkuDemo._setSpecification(i)}var r=t;o.data.specification_on.length>0?(t.good_attribute=o.data.specification_on,o.data.specification_on.forEach(function(t,o){if(r.ruleForm.good_specification_old&&r.ruleForm.good_specification_old.length>0&&e){var i=r.ruleForm.good_specification_old.findIndex(function(e){return e.specification_id===t.id});-1===i?r.ruleForm.good_specification.push({specification_id:t.id,data:null}):r.ruleForm.good_specification.push(r.ruleForm.good_specification_old[i])}else r.ruleForm.good_specification.push({specification_id:t.id,data:null})})):t.good_attribute=[],o.data.brand_on.length>0&&(t.ruleForm.brand_id=t.ruleForm.brand_id?t.ruleForm.brand_id:null,t.goods_brand=o.data.brand_on)})},getSkuData:function(){var e=this;return this.$refs.SkuDemo._getData().map(function(t){var o=t.id,i=t.format,r=t.img,a=t.market_price,l=t.cost_price,n=t.price,s=t.inventory,u=t.skus,d=t.code_type,c=t.is_fixed,p=t.good_code,f=t.file,m=t.file_name,g=t.file_id,_=u.reduce(function(e,t){return""+e+t.k+"："+t.v+"——"},"");if(void 0===a)throw e.$message.error(_+e.$t("good.detail.no_input",{attribute:e.$t("good.sku.form.input.placeholder.market_price")})),e.formLoading=!1,new Error(e.$t("hint.error.please_entert",{attribute:e.$t("good.sku.form.input.placeholder.market_price")}));if(void 0===l)throw e.$message.error(_+e.$t("good.detail.no_input",{attribute:e.$t("good.sku.form.input.placeholder.cost_price")})),e.formLoading=!1,new Error(e.$t("hint.error.please_entert",{attribute:e.$t("good.sku.form.input.placeholder.cost_price")}));if(void 0===n)throw e.$message.error(_+e.$t("good.detail.no_input",{attribute:e.$t("good.sku.form.input.placeholder.price")})),e.formLoading=!1,new Error(e.$t("hint.error.please_entert",{attribute:e.$t("good.sku.form.input.placeholder.price")}));if(void 0===s)throw e.$message.error(_+e.$t("good.detail.no_input",{attribute:e.$t("good.sku.form.input.placeholder.inventory")})),e.formLoading=!1,new Error(e.$t("hint.error.please_entert",{attribute:e.$t("good.sku.form.input.placeholder.inventory")}));if(2===e.ruleForm.type){if(!p)throw e.$message.error(_+e.$t("good.detail.no_card_is_set")),e.formLoading=!1,new Error(e.$t("good.detail.card_is_set"));if(0===p.length)throw e.$message.error(_+e.$t("good.detail.no_card_is_set")),e.formLoading=!1,new Error(e.$t("good.detail.card_is_set"));if(p.length>1&&Number(s)>p.length)throw e.$message.error(_+e.$t("good.detail.carmi_inventory")),e.formLoading=!1,new Error(e.$t("good.detail.carmi_inventory"))}else if(3===e.ruleForm.type&&void 0===f)throw e.$message.error(_+e.$t("good.detail.upload_files")),e.formLoading=!1,new Error(e.$t("good.detail.upload_files"));return{id:o,format:i,img:r,market_price:a,cost_price:l,price:n,inventory:s,code_type:d,good_code:p,is_fixed:c,file:f,file_name:m,file_id:g,product_sku:u.map(function(e){return{key:e.k,value:e.v}})}})},setVideo:function(e){this.playerOptions.sources[0].src=this.ruleForm.video},setPoster:function(e){this.playerOptions.poster=this.ruleForm.poster},change:function(e){this.$forceUpdate()},setType:function(e){this.$refs.SkuDemo._setType(e)}}}},xfTD:function(e,t,o){"use strict";var i=o("3p40");o.n(i).a},yMd6:function(e,t,o){"use strict";o.r(t);var i=o("OUSa"),r=o("jqbs");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);o("Wnp+");var l=o("KHd+"),n=Object(l.a)(r.default,i.a,i.b,!1,null,"28ebaf9b",null);n.options.__file="sku-table.vue",t.default=n.exports}}]);